(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),i=a(7),c=a(9),l=a(21),u=a(24),d=a(76),m=a(2),f="#A9A9A9",p=2,h="#408ab8",g=5,b="rgba(255, 188, 71, 0.7)",E="rgba(255, 188, 71, 0.3)",v="ADD_LINK",N="ADD_NODE",k="DELETE_LINK",O="DELETE_NODE",y="GET_GRAPH_BEGIN",S="GET_GRAPH_FAILURE",C="GET_GRAPH_SUCCESS",j="HANDLE_KEYBOARD_SHORTCUT",w="SAVE_LINK_SUCCESS",L="SAVE_NODE_SUCCESS",x="UPDATE_GRAPH_BEGIN",A="UPDATE_GRAPH_FAILURE",D="UPDATE_GRAPH_SUCCESS",T="UPDATE_GRAPH_SETTINGS_SUCCESS",P="UPDATE_LINK",F="UPDATE_NODE",G={LOGIN_FAILURE:"LOGIN_FAILURE",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGOUT:"LOGOUT",RESET_USER_ERRORS:"RESET_USER_ERRORS",UPDATE_USER_FAILURE:"UPDATE_USER_FAILURE",UPDATE_USER_SUCCESS:"UPDATE_USER_SUCCESS",LOGIN_ENDPOINT:"/api/users/login",SIGNUP_ENDPOINT:"/api/users/signup",USERS_ENDPOINT:"/api/users/"},I={errors:{},isLoggedIn:!1,user:{}},B=a(12),U=a(14),M=a(3),R=a(20),_={data:{nodes:[],links:[],linkSequence:0,nodeSequence:0,settings:{defaultLinkColor:f,defaultLinkWidth:p,defaultNodeColor:h,defaultNodeSize:g}},idToLink:{},idToNode:{},isLoading:!1,isUpdating:!1,neighbours:{},handleKeyboardShortcut:!0},H=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G.LOGIN_FAILURE:return Object(m.a)(Object(m.a)({},e),{},{errors:t.errors});case G.LOGIN_SUCCESS:return Object(m.a)(Object(m.a)({},e),{},{errors:{},isLoggedIn:!0,user:t.user});case G.LOGOUT:return{errors:{},isLoggedIn:!1,user:{}};case G.RESET_USER_ERRORS:return Object(m.a)(Object(m.a)({},e),{},{errors:{}});case G.UPDATE_USER_FAILURE:return Object(m.a)(Object(m.a)({},e),{},{errors:t.errors});case G.UPDATE_USER_SUCCESS:return Object(m.a)(Object(m.a)({},e),{},{errors:{},user:t.user});default:return e}},graph:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)({},e.data)});switch(t.type){case v:a.data=Object(m.a)(Object(m.a)({},e.data),{},{links:[].concat(Object(R.a)(e.data.links),[t.link])});var n=a.data.nodes.filter((function(e){return e===t.link.source||e===t.link.target})),r=Object(M.a)(n,2),o=r[0],s=r[1];if(a.neighbours[o.id].add(s),a.neighbours[s.id].add(o),o.isGroup&&s.isGroup){var i=o===t.link.target?o:s;i.groups.push(o===t.link.source?o.id:s.id)}else o.isGroup?s.groups.push(o.id):s.isGroup&&o.groups.push(s.id);return a.idToLink[t.link.id]=t.link,a.data.linkSequence++,a;case N:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),{},{nodes:[].concat(Object(R.a)(e.data.nodes),[t.node]),nodeSequence:e.data.nodeSequence+1}),idToNode:Object(m.a)(Object(m.a)({},e.idToNode),{},Object(U.a)({},t.node.id,t.node)),neighbours:Object(m.a)(Object(m.a)({},e.neighbours),{},Object(U.a)({},t.node.id,new Set))});case k:var c=t.link,l=c.source,u=c.target;return a.data.links=e.data.links.filter((function(e){return e!==c})),l.groups=l.groups.filter((function(e){return e!==u.id})),u.groups=u.groups.filter((function(e){return e!==l.id})),a.neighbours[u.id].delete(l),a.neighbours[l.id].delete(u),a;case O:var d=t.node;a.data.nodes=e.data.nodes.filter((function(e){return e!==d}));var f=e.neighbours[d.id];return f.forEach((function(e){a.neighbours[e.id].delete(d),e.groups=e.groups.filter((function(e){return e!==d.id}))})),a.data.links=e.data.links.filter((function(e){return e.source!==d&&e.target!==d})),delete a.idToNode[d.id],a;case y:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case S:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1});case C:a.data=Object(m.a)({},t.graph);var p,h=Object(B.a)(a.data.nodes);try{for(h.s();!(p=h.n()).done;){var g=p.value;a.idToNode[g.id]=g,a.neighbours[g.id]=new Set}}catch(I){h.e(I)}finally{h.f()}var b,E=Object(B.a)(a.data.links);try{for(E.s();!(b=E.n()).done;){var w=b.value;a.idToLink[w.id]=w,a.neighbours[w.source].add(a.idToNode[w.target]),a.neighbours[w.target].add(a.idToNode[w.source])}}catch(I){E.e(I)}finally{E.f()}return Object(m.a)(Object(m.a)({},a),{},{isLoading:!0});case j:return Object(m.a)(Object(m.a)({},e),{},{handleKeyboardShortcut:t.shouldHandle});case x:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!0});case A:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!1});case T:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),{},{settings:t.values})});case D:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),t.values),isUpdating:!1});case P:var L=a.data.links.find((function(e){return e.source===t.link.source&&e.target===t.link.target}));return Object.assign(L,t.link),a;case F:var G=a.idToNode[t.node.id];return G.isGroup!==t.node.isGroup&&a.neighbours[G.id].forEach((function(e){t.node.isGroup&&!e.isGroup?e.groups.push(t.node.id):e.groups=e.groups.filter((function(e){return e!==t.node.id}))})),Object.assign(G,t.node),a;default:return e}}}),z=Object(u.d)(H,Object(u.a)(d.a)),K=a(6),W=a.n(K),q={setAuthToken:function(e){localStorage.token=e,W.a.defaults.headers.common.Authorization=e},get:function(e){return W.a.get(G.USERS_ENDPOINT+e)},update:function(e,t){return W.a.put(G.USERS_ENDPOINT+e,t)},login:function(e,t){return W.a.post(G.LOGIN_ENDPOINT,{username:e,password:t})},logout:function(){localStorage.removeItem("token"),delete W.a.defaults.headers.common.Authorization},signup:function(e){return W.a.post(G.SIGNUP_ENDPOINT,e)}};var Y,X=function(e){return{type:G.LOGIN_SUCCESS,user:e}},V={id:1011,links:[{id:1,notes:"Met in 1st year res",source:0,color:"#29B6F6",width:2,target:3,type:"link"},{id:2,notes:"Met in 1st year res",source:0,color:"#29B6F6",width:2,target:4,type:"link"},{id:3,notes:"Played varsity football together",source:3,color:"#C492AC",width:2,target:4,type:"link"},{id:7,notes:"",source:1,color:"#02D7C5",width:2,target:8,type:"link"},{id:8,notes:"",source:6,color:"#29B6F6",width:2,target:0,type:"link"},{id:9,notes:"Met in 1st year English",source:0,color:"#29B6F6",width:2,target:7,type:"link"},{id:10,notes:"",source:10,color:"#33B579",width:2,target:7,type:"link"},{id:11,notes:"",source:10,color:"#33B579",width:2,target:11,type:"link"},{id:12,notes:"",source:10,color:"#33B579",width:2,target:12,type:"link"},{id:13,notes:"Met in 2nd year res",source:13,color:"#F35C4E",width:2,target:7,type:"link"},{id:14,notes:"",source:15,color:"#584A8F",width:2,target:17,type:"link"},{id:15,notes:"",source:1,color:"#02D7C5",width:2,target:9,type:"link"},{id:16,notes:"",source:1,color:"#02D7C5",width:2,target:14,type:"link"},{id:17,notes:"",source:16,color:"#A9A9A9",width:2,target:18,type:"link"},{id:18,notes:"",source:6,color:"#29B6F6",width:2,target:19,type:"link"},{id:19,notes:"",source:16,color:"#A9A9A9",width:2,target:20,type:"link"},{id:20,notes:"",source:16,color:"#A9A9A9",width:2,target:23,type:"link"},{id:22,notes:"",source:19,color:"#29B6F6",width:2,target:24,type:"link"},{id:23,notes:"",source:15,color:"#584A8F",width:2,target:26,type:"link"},{id:24,notes:"",source:15,color:"#584A8F",width:2,target:28,type:"link"},{id:25,notes:"",source:15,color:"#584A8F",width:2,target:27,type:"link"},{id:26,notes:"",source:12,color:"#33B579",width:2,target:30,type:"link"},{id:27,notes:"",source:19,color:"#29B6F6",width:2,target:26,type:"link"}],nodes:[(Y={id:0,val:10,name:"University",type:"node",color:"#29B6F6"},Object(U.a)(Y,"val",8),Object(U.a)(Y,"fx",7.72),Object(U.a)(Y,"fy",-36.8),Object(U.a)(Y,"groups",[6]),Object(U.a)(Y,"notes",""),Object(U.a)(Y,"isGroup",!0),Y),{id:1,name:"Work",type:"node",color:"#4cc8b3",val:8,fx:-237,fy:30,groups:[],notes:"",isGroup:!0},{fx:-31.086248579329524,fy:-85.86072254314755,groups:[],id:6,isGroup:!0,name:"School",notes:"",color:"#29B6F6",val:10,type:"node"},{id:3,name:"Roy",type:"node",groups:[0],color:"#408ab8",val:5,fx:28.5,fy:-89,notes:"Birthday: April 4\n\nMajor: Zoology\n\nLoves otters more than people",isGroup:!1},{id:4,name:"Frank",type:"node",groups:[0],color:h,val:g,notes:"Birthday: Jan 2\n\nMajor: Biology\n\nSoundcloud rapper",isGroup:!1},{fx:35.389488264503214,fy:18.68936922237114,groups:[0,10],id:7,isGroup:!1,name:"Ava",notes:"Birthday: Aug 14\n\nMajor: Theoretical physics\n\nOccupaton: TikToker",color:"#FE9998",val:5,type:"node"},{fx:-192.65914613593029,fy:69.07720050505536,groups:[1],id:8,isGroup:!1,name:"Harold",notes:"Believes the Earth is flat.",color:"#408ab8",val:5,type:"node"},{fx:-265.1785406836182,fy:80.52536467592789,groups:[1],id:9,isGroup:!1,name:"Vera",notes:"Vegetarian",color:"#FE9998",val:5,type:"node"},{fx:49.454427540662984,fy:58.64827694638886,groups:[],id:10,isGroup:!0,name:"Johnson Family",notes:"Originally from England",color:"#33B579",val:8,type:"node"},{fx:85.49694351821532,fy:90.09830455065064,groups:[10],id:11,isGroup:!1,name:"Carol",notes:"Ava's mom\n\nUltra marathoner, yoga teacher, vegan",color:"#FE9998",val:5,type:"node"},{fx:23.633214897791433,fy:99.95405432857024,groups:[10],id:12,isGroup:!1,name:"Stan",notes:"Ava's dad\n\nWorks in finance\n\nIs distantly related to Mariah Carey",color:"#408ab8",val:5,type:"node"},{fx:66.44734433456978,fy:8.51775277890066,groups:[],id:13,isGroup:!1,name:"Matt",notes:"Ava's boyfriend\n\nLost his front tooth after being jumped by a gang of 10-year olds. He was 25.",color:"#408ab8",val:5,type:"node"},{fx:-285.16726491027816,fy:4.68476402839536,groups:["1"],id:14,isGroup:!1,name:"Gord",notes:"Birthday: May 5\n\nLoves craft beer and tacos",color:"#408ab8",val:5,type:"node"},{fx:-216.05457376864402,fy:-118.29384078064074,groups:[],id:15,isGroup:!0,name:"Book club",notes:"",color:"#584A8F",val:10,type:"node"},{fx:-111.91854912013261,fy:118.01478343646012,groups:[],id:16,isGroup:!0,name:"Gym",notes:"",color:"#727A8C",val:10,type:"node"},{groups:[15],id:17,isGroup:!1,name:"Dave",notes:"Still believes in Santa Claus",color:"#408ab8",val:5,type:"node"},{fx:-166.49367431824479,fy:163.40953799955116,groups:[16],id:18,isGroup:!1,name:"Janelle",notes:"At the gym 24/7",color:"#FE9998",val:5,type:"node"},{fx:-54.9253091692777,fy:-149.49543392885118,groups:[6],id:19,isGroup:!0,name:"Highschool",notes:"",color:"#29B6F6",val:5,type:"node"},{fx:-101.65583035252143,fy:183.7616435456369,groups:[16],id:20,isGroup:!1,name:"Ben",notes:"The guy who can't stop talking about CrossFit",color:"#408ab8",val:5,type:"node"},{groups:[16],id:23,isGroup:!1,name:"Gary",notes:"Parkour",color:"#408ab8",val:5,type:"node"},{fx:-97.21417718469053,fy:-187.05340008831627,groups:[19],id:24,isGroup:!1,name:"Dory",notes:"Super forgetful\n\nOwes me $5",color:"#FE9998",val:5,type:"node"},{groups:[15,19],id:26,isGroup:!1,name:"Annabel",notes:"Birthday: July 16\n\nHas the best dad jokes",color:"#FE9998",val:5,type:"node"},{groups:[15],id:27,isGroup:!1,name:"Leanne",notes:"Has a Schnauzer named Dumbledore",color:"#FE9998",val:5,type:"node"},{groups:[15],id:28,isGroup:!1,name:"Anthony",notes:"Looks like Steve Carell\n\nHates Steve Carell",color:"#408ab8",val:5,type:"node"},{fx:-14.55123581410429,fy:136.1284102875155,groups:[],id:30,isGroup:!1,name:"Mariah Carey",notes:"",color:"#FE9998",val:5,type:"node"}],linkSequence:28,nodeSequence:31,settings:{defaultLinkColor:f,defaultLinkWidth:p,defaultNodeColor:h,defaultNodeSize:g}},Z=function(e){return{type:C,graph:e}},J=function(e){return{type:j,shouldHandle:e}},$=function(){return function(e){e(Z(V))}},Q=(a(123),[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]),ee=["#FFFFFF","#F2F2F2","#E6E6E6","#CCCCCC","#B3B3B3","#999999","#808080","#666666","#4C4C4C","#000000"],te=function(e){var t=e.value,a=e.onColorChange,o=e.width,s=e.height,i=Object(n.useState)(t),c=Object(M.a)(i,2),l=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(M.a)(d,2),f=m[0],p=m[1],h=Object(n.useRef)(null),g=function(e){return e.map((function(e){return r.a.createElement("div",{className:l===e?"color-picker-palette-cell color-picker-palette-cell-selected":"color-picker-palette-cell",style:{background:e},onClick:function(){return function(e){a(e),p(!1)}(e)},key:e})}))},b=Object(n.useCallback)((function(e){e.target.className.includes("color-picker-")||p(!1)}),[]);return Object(n.useEffect)((function(){f?document.addEventListener("click",b):document.removeEventListener("click",b)}),[f,b]),Object(n.useEffect)((function(){return function(){return document.removeEventListener("click",b)}}),[b]),Object(n.useEffect)((function(){u(t)}),[t]),r.a.createElement("div",{className:"color-picker",style:{width:o||"100%",height:s||"100%"}},r.a.createElement("div",{className:"color-picker-selector",onClick:function(){p(!f)}},r.a.createElement("div",{className:"color-picker-selector-current",style:{background:l}})),f&&r.a.createElement("div",{ref:h,className:"color-picker-palette"},r.a.createElement("div",{className:"color-picker-default-palette"},Q.map((function(e){return r.a.createElement("div",{key:e[0],className:"color-picker-palette-col"},g(e))})),r.a.createElement("div",{className:"color-picker-palette-row"},g(ee)))))},ae=a(45),ne=function(e){var t=e.component,a=e.isLoggedIn,n=Object(ae.a)(e,["component","isLoggedIn"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(l.a,{to:"/dashboard"}):r.a.createElement(t,e)}}))},re=function(e){var t=e.component,a=e.isLoggedIn,n=Object(ae.a)(e,["component","isLoggedIn"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))},oe=(a(125),function(e){var t=e.color,a=void 0===t?"white":t,o=e.id,s=e.label,i=e.max,c=e.min,l=e.onChange,u=e.onMouseUp,d=void 0===u?function(){}:u,m=e.value,f=Object(n.useRef)(null),p=Object(n.useState)(0),h=Object(M.a)(p,2),g=h[0],b=h[1];return Object(n.useEffect)((function(){var e=(f.current.getBoundingClientRect().width-15)/(i-c),t=e*parseInt(m)-e+2.5;b(t)}),[m]),r.a.createElement("div",{className:"range-slider"},r.a.createElement("div",{className:"custom-slider-wrapper"},r.a.createElement("div",{className:"custom-slider-range"}),r.a.createElement("div",{className:"custom-slider-knob",style:{background:a,left:g,opacity:f.current?"1.0":"0",transform:f.current?"scale(1)":"scale(0)"}})),r.a.createElement("label",{className:"sr-only",htmlFor:o,style:{textTransform:"uppercase"}},s),r.a.createElement("input",{ref:f,id:o,className:"input-slider",type:"range",min:c,max:i,onChange:l,onMouseUp:d,value:m}))}),se=(a(126),r.a.forwardRef((function(e,t){e.closeContextMenu;return r.a.createElement("div",{ref:t,id:"context-menu"},r.a.createElement("ul",null,r.a.createElement("strong",null,"Add new")))}))),ie=(a(127),document.getElementById("modalRoot")),ce=function(e){var t=e.children,a=Object(n.useState)(document.createElement("div")),r=Object(M.a)(a,2),o=r[0];r[1];return Object(n.useEffect)((function(){return ie.appendChild(o),function(){ie.removeChild(o)}}),[]),s.a.createPortal(t,o)},le={resetUserErrors:function(){return function(e){e({type:G.RESET_USER_ERRORS})}},updateUser:function(e,t){return function(e){}},updateGraphSettings:function(e,t){return function(e){e(function(e){return{type:T,values:e}}(t))}}},ue=Object(i.b)((function(e){return{user:e.auth.user,errors:e.auth.errors,graph:e.graph.data}}),le)((function(e){var t=e.errors,a=e.graph,n=e.page,o=e.resetUserErrors,s=e.user,i=e.updateGraphSettings,c=e.updateUser;return"Profile"===n?r.a.createElement(Me,{errors:t,resetUserErrors:o,user:s,updateUser:c}):"Security"===n?r.a.createElement(Re,{errors:t,resetUserErrors:o,user:s,updateUser:c}):r.a.createElement(_e,{graph:a,updateGraphSettings:i})})),de=function(e){var t=e.currentPage,a=e.setCurrentPage;return r.a.createElement("nav",{className:"modal-nav","aria-label":"Settings navigation"},r.a.createElement("button",{className:"Profile"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Edit profile",onClick:function(){return a("Profile")}},r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("button",{className:"Security"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Security",onClick:function(){return a("Security")}},r.a.createElement("i",{className:"fas fa-lock"})),r.a.createElement("button",{className:"Settings"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Settings",onClick:function(){return a("Settings")}},r.a.createElement("i",{className:"fas fa-cog"})))},me=function(e){var t=e.toggleModal,a=Object(n.useState)("Profile"),o=Object(M.a)(a,2),s=o[0],i=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"overlay",onClick:t}),r.a.createElement("div",{className:"modal-container"},r.a.createElement(de,{currentPage:s,setCurrentPage:i}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(ue,{page:s})),r.a.createElement("button",{className:"btn modal-close fadein-btn",onClick:t},"\xd7"))))},fe=(a(128),function(e){var t=e.isLoggedIn,a=e.logout,n=e.toggleModal;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(c.b,{to:"/",role:"banner",className:"navbar-brand"},r.a.createElement("img",{src:"/MapSoc-client/logo-small.png",alt:"Logo"})),t&&r.a.createElement("section",{className:"user-menu"},r.a.createElement("button",{className:"btn navbar-btn fadein-btn",title:"Edit profile",onClick:n},r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("button",{className:"btn navbar-btn fadein-btn",title:"Logout",onClick:a},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))))}),pe=a(78),he=a(79),ge=a(90),be=a(89),Ee=a(88),ve=a(44),Ne=(a(140),["Select","Draw","Erase","Area select"]),ke={Select:r.a.createElement("i",{className:"fas fa-mouse-pointer"}),Draw:r.a.createElement("i",{className:"fas fa-pencil-alt"}),Erase:r.a.createElement("i",{className:"fas fa-eraser"}),"Area select":r.a.createElement("i",{className:"fas fa-vector-square"})},Oe=r.a.memo((function(e){var t=e.currentTool,a=e.selectTool;return r.a.createElement("section",{className:"toolbar"},Ne.map((function(e){return r.a.createElement("button",{id:e+"-btn",key:e,name:e,className:t===e?"btn toolbar-btn toolbar-btn-selected":"btn toolbar-btn",onClick:function(){a(e)},title:e+" (".concat(e.charAt(0),")")},ke[e])})))})),ye=function(e){var t=e.handleKeyboardShortcut,a=e.onNotesBlur,o=e.onChange,s=e.notes,i=Object(n.useState)(!1),c=Object(M.a)(i,2),l=c[0],u=c[1],d=Object(n.useRef)(null);return r.a.createElement("section",{className:"details-notes"},r.a.createElement("h2",null,"Notes",!l&&r.a.createElement("button",{onClick:function(){u(!0),t(!1),d.current.disabled=!1,d.current.focus()},className:"edit-icon-btn"},r.a.createElement("i",{className:"far fa-edit"}))),r.a.createElement("textarea",{ref:d,id:"notes",onBlur:function(){u(!1),t(!0),d.current.disabled=!0,a()},onChange:o,value:s,spellCheck:!1,disabled:!0}))},Se=r.a.memo((function(e){var t=e.graphId,a=e.handleKeyboardShortcut,o=e.node,s=e.nodeIndex,i=e.updateNode,c=e.saveNode,l=Object(n.useState)(o.name),u=Object(M.a)(l,2),d=u[0],f=u[1],p=Object(n.useState)(!o.name),h=Object(M.a)(p,2),g=h[0],b=h[1],E=Object(n.useState)(!1),v=Object(M.a)(E,2),N=v[0],k=v[1],O=Object(n.useState)(o.isGroup),y=Object(M.a)(O,2),S=y[0],C=y[1],j=Object(n.useState)(o.val.toString()),w=Object(M.a)(j,2),L=w[0],x=w[1],A=Object(n.useState)(o.color),D=Object(M.a)(A,2),T=D[0],P=D[1],F=Object(n.useState)(o.notes),G=Object(M.a)(F,2),I=G[0],B=G[1],U=Object(n.useRef)(Object(m.a)({},o)),R=Object(n.useCallback)((function(e){e.target.className.includes("slider")||k(!1)}),[]),_=function(){var e=s[o.id];return Object(m.a)({},e)},H=function(e){U.current=Object(m.a)({},e),W(U.current),f(e.name),C(e.isGroup),b(!e.name),k(!1),x(e.val.toString()),P(e.color),B(e.notes)},z=function(){b(!1),c(t,_())},K=function(e){var a=e.currentTarget.id,n=e.currentTarget.value,r=_();["name","notes"].includes(a)?"name"===a?(f(n),r.name=n):(B(n),r.notes=n):["size"].includes(a)&&("size"===a&&(x(n),r.val=parseInt(n)),c(t,r)),i(r)},W=function(e){delete e.x,delete e.y,delete e.fx,delete e.fy};return Object(n.useEffect)((function(){o.id!==U.current.id&&H(o)}),[o,H]),Object(n.useEffect)((function(){N?document.addEventListener("click",R):document.removeEventListener("click",R)}),[N]),Object(n.useEffect)((function(){a(!g)}),[g]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"details-node-icon-header"},r.a.createElement("i",{className:"fas fa-circle details-node-icon",style:{color:T}})),r.a.createElement("h1",{className:"details-node-header"},g?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"sr-only",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"name-input",id:"name",type:"text",onKeyDown:function(e){if(13===e.keyCode)switch(e.currentTarget.id){case"name":z()}},onBlur:z,value:d,onChange:K,autoFocus:!0,autoComplete:"off"})):r.a.createElement(r.a.Fragment,null,d||"...",r.a.createElement("button",{onClick:function(){return b(!0)},className:"edit-icon-btn"},r.a.createElement("i",{className:"far fa-edit"})))),o.groups.length>0&&r.a.createElement("p",{className:"details-groups"},"Member of:\u2002",o.groups.map((function(e,t){var a=t===o.groups.length-1?s[e].name:s[e].name+", ";return r.a.createElement("span",{key:e},a)}))),r.a.createElement("div",{className:"details-button-row"},r.a.createElement("div",{className:"details-button-row-btn",title:"Change color"},r.a.createElement(te,{value:T,onColorChange:function(e){P(e);var a=_();a.color=e,c(t,a),i(a)}})),r.a.createElement("button",{className:"details-button-row-btn",title:"Change size",onClick:function(){return k(!N)}},r.a.createElement("i",{className:"fas fa-expand-alt details-button-row-btn-icon",style:{color:T}})),N&&r.a.createElement("div",{className:"size-slider-wrapper"},r.a.createElement("div",{className:"size-slider-label"},r.a.createElement("span",null,"Size"),r.a.createElement("span",null,L)),r.a.createElement(oe,{color:T,id:"size",label:"Node size",min:1,max:10,onChange:K,onMouseUp:function(){return k(!1)},value:L})),r.a.createElement("button",{className:"details-button-row-btn",onClick:function(){var e=_();C(!S),e.isGroup=!S,c(t,e),i(e)}},S?r.a.createElement("i",{className:"fas fa-house-user details-button-row-btn-icon",style:{color:T}}):r.a.createElement("i",{className:"fas fa-user",style:{color:T}}))),r.a.createElement(ye,{onNotesBlur:function(){c(t,_())},onChange:K,notes:I,handleKeyboardShortcut:a}),function(){var e=U.current;return d!==e.name||S!==e.isGroup||L!==e.val.toString()||T!==e.color||I!==e.notes}()&&r.a.createElement("button",{id:"details-undo-btn",className:"details-btn",onClick:function(){H(U.current),i(U.current),c(t,U.current)},style:{color:T,borderColor:T},title:"Undo changes"},r.a.createElement("i",{className:"fas fa-undo"})))}),(function(e,t){var a=e.node,n=t.node;return a.id===n.id&&a.groups.length===n.groups.length&&a.name===n.name&&a.notes===n.notes})),Ce=r.a.memo((function(e){var t=e.link,a=e.linkIndex,o=e.graphId,s=e.handleKeyboardShortcut,i=e.saveLink,c=e.updateLink,l=Object(n.useState)(t.color),u=Object(M.a)(l,2),d=u[0],f=u[1],p=Object(n.useState)(t.notes||""),h=Object(M.a)(p,2),g=h[0],b=h[1],E=Object(n.useState)(t.width.toString()),v=Object(M.a)(E,2),N=v[0],k=v[1],O=Object(n.useState)(!1),y=Object(M.a)(O,2),S=y[0],C=y[1],j=Object(n.useRef)(Object(m.a)({},t)),w=Object(n.useCallback)((function(e){e.target.className.includes("slider")||C(!1)}),[]),L=function(){var e=a[t.id];return Object(m.a)({},e)},x=function(e){j.current=Object(m.a)({},e),f(e.color),b(e.notes),k(e.width.toString())},A=function(e){var t=e.currentTarget.id,a=e.currentTarget.value,n=L();["width"].includes(t)?("width"===t&&(k(a),n.width=parseInt(a)),i(o,n)):"notes"===t&&(b(a),n.notes=a),c(n)},D=function(e){var t=e.color;return r.a.createElement("div",{className:"details-link-header-node"},r.a.createElement("i",{className:e.isGroup?"fas fa-house-user details-link-header-node-icon":"fas fa-user details-link-header-node-icon",style:{color:t}}),r.a.createElement("span",null,e.name))};return Object(n.useEffect)((function(){t.id!==j.current.id&&x(t)}),[t,x]),Object(n.useEffect)((function(){S?document.addEventListener("click",w):document.removeEventListener("click",w)}),[S]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"details-link-header"},D(t.source),r.a.createElement("div",{className:"details-link-header-link-icon",style:{background:d,width:parseInt(N)+2}}),D(t.target)),r.a.createElement("div",{className:"details-button-row"},r.a.createElement("div",{className:"details-button-row-btn",title:"Change color"},r.a.createElement(te,{value:d,onColorChange:function(e){var t=L();f(e),t.color=e,i(o,t),c(t)}})),r.a.createElement("button",{className:"details-button-row-btn",title:"Change width",onClick:function(){return C(!S)}},r.a.createElement("i",{className:"fas fa-expand-alt details-button-row-btn-icon",style:{color:d}})),S&&r.a.createElement("div",{className:"size-slider-wrapper"},r.a.createElement("div",{className:"size-slider-label"},r.a.createElement("span",null,"Width"),r.a.createElement("span",null,N)),r.a.createElement(oe,{color:d,id:"width",label:"Link width",min:1,max:10,onChange:A,onMouseUp:function(){return C(!1)},value:N}))),r.a.createElement(ye,{onNotesBlur:function(){i(o,t)},onChange:A,notes:g,handleKeyboardShortcut:s}),function(){var e=j.current;return N!==e.width.toString()||d!==e.color||g!==e.notes}()&&r.a.createElement("button",{id:"details-undo-btn",className:"details-btn",onClick:function(){x(j.current),c(j.current),i(o,j.current)},style:{color:d,borderColor:d},title:"Undo changes"},r.a.createElement("i",{className:"fas fa-undo"})))}),(function(e,t){var a=e.link,n=t.link;return a.id===n.id&&a.notes===n.notes&&a.source===n.source&&a.target===n.target})),je=(a(141),{handleKeyboardShortcut:J,saveLink:function(e,t){return function(e){e(function(e){return{type:w,link:e}}(t))}},saveNode:function(e,t){return function(e){e(function(e){return{type:L,node:e}}(t))}},updateLink:function(e){return function(t){t(function(e){return{type:P,link:e}}(e))}},updateNode:function(e){return function(t){t(function(e){return{type:F,node:e}}(e))}}}),we=Object(i.b)((function(e){return{graphId:e.graph.data.id,linkIndex:e.graph.idToLink,nodeIndex:e.graph.idToNode}}),je,null,{forwardRef:!0})(r.a.forwardRef((function(e,t){var a=e.graphId,n=e.linkIndex,o=e.nodeIndex,s=e.nodeOrLink,i=e.saveLink,c=e.saveNode,l=e.handleKeyboardShortcut,u=e.updateLink,d=e.updateNode;return r.a.createElement("div",{ref:t,className:"details"},"node"===s.type?r.a.createElement(Se,{graphId:a,node:s,nodeIndex:o,saveNode:c,handleKeyboardShortcut:l,updateNode:d}):r.a.createElement(Ce,{graphId:a,link:s,linkIndex:n,saveLink:i,handleKeyboardShortcut:l,updateLink:u}))}))),Le=(a(142),function(e){Object(ge.a)(a,e);var t=Object(be.a)(a);function a(){var e;Object(pe.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).graph=r.a.createRef(),e.contextMenu=r.a.createRef(),e.details=r.a.createRef(),e.selectionBox=r.a.createRef(),e.state={showContextMenu:!1,nodeClicks:0,shouldPreventZoom:!1,zoomAmount:0,currentTool:"Select",currentNodeOrLink:null,hoveredObject:null,isAddingLink:!1,hasClickBeenHandled:!0,mouseX:0,mouseY:0,ctx:null,selectedNodes:[],isSelecting:!1,selectionStartCoords:[0,0]},e.handleKeyPress=function(t){if(e.props.graph.handleKeyboardShortcut)switch(t.keyCode){case 83:e.selectTool("Select");break;case 68:e.selectTool("Draw");break;case 69:e.selectTool("Erase");break;case 65:e.selectTool("Area select")}switch(t.keyCode){case 27:e.state.isAddingLink&&e.setState({isAddingLink:!1});break;case 46:var a=e.state.currentNodeOrLink;a?"node"===a.type?e.deleteNode(a):e.deleteLink(a):e.state.selectedNodes.length&&e.state.selectedNodes.forEach((function(t){return e.deleteNode(t)}))}},e.handlePencilClick=function(t){e.state.isAddingLink?e.setState({isAddingLink:!1}):e.addNode(t.clientX,t.clientY)},e.handleSelectionClick=function(t){if(e.state.isSelecting)e.selectNodesInArea(e.state.selectionStartCoords[0],e.state.selectionStartCoords[1],t.clientX,t.clientY);else{e.setState({selectionStartCoords:[t.clientX,t.clientY]});var a=e.selectionBox.current;a.style.left=t.clientX+"px",a.style.top=t.clientY+"px",a.style.width="0px",a.style.height="0px"}e.setState((function(e){return{isSelecting:!e.isSelecting}}))},e.onBackgroundClick=function(t){if(!e.state.hasClickBeenHandled){switch(e.state.currentTool){case"Select":e.state.currentNodeOrLink&&e.setState({currentNodeOrLink:null});break;case"Draw":e.handlePencilClick(t);break;case"Area select":e.handleSelectionClick(t)}e.setState({hasClickBeenHandled:!0})}},e.onClick=function(t){e.setState({hasClickBeenHandled:!1});var a=e.isContextMenuClick(t);e.state.showContextMenu&&!a&&(e.setState({hasClickBeenHandled:!0}),e.closeContextMenu())},e.onMouseMove=function(t){e.state.isSelecting&&e.drawSelectionBox(t.clientX,t.clientY);var a=e.graph.current.screen2GraphCoords(t.clientX,t.clientY),n=a.x,r=a.y;e.setState({mouseX:n,mouseY:r})},e.onHover=function(t){t!==e.state.hoveredObject&&e.setState({hoveredObject:t})},e.onRightClick=function(t){t.preventDefault();var a=t.clientY,n=t.clientX;e.setState({showContextMenu:!0},(function(){var t=e.contextMenu.current;t.offsetWidth,t.offsetHeight;t.style.left=n+"px",t.style.top=a+"px"}))},e.closeContextMenu=function(){e.setState({showContextMenu:!1})},e.createNodeFromMenu=function(){var t=e.contextMenu.current,a=parseInt(t.style.left),n=parseInt(t.style.top);e.addNode(a,n)},e.isContextMenuClick=function(t){if(!e.state.showContextMenu)return!1;var a=e.contextMenu.current.getBoundingClientRect();return!(t.clientX<a.left||t.clientX>a.right||t.clientY<a.top||t.clientY>a.bottom)},e.addNode=function(t,a){var n=e.graph.current.screen2GraphCoords(t,a),r=n.x,o=n.y,s={id:e.props.graph.data.nodeSequence,name:"",groups:[],isGroup:!1,notes:"",color:e.props.graph.data.settings.defaultNodeColor,val:e.props.graph.data.settings.defaultNodeSize,type:"node"};Object.assign(s,{fx:r,fy:o}),e.props.addNode(e.props.graph.data.id,s),e.setState({shouldPreventZoom:!0,currentNodeOrLink:s})},e.deleteNode=function(t){e.props.deleteNode(e.props.graph.data.id,t),e.setPostDeleteState(t)},e.handleNodePencilClick=function(t){e.state.isAddingLink?(e.props.graph.neighbours[t.id].has(e.state.currentNodeOrLink)||t===e.state.currentNodeOrLink||e.addLink(e.state.currentNodeOrLink.id,t.id),e.setState({isAddingLink:!1})):e.setState({currentNodeOrLink:t,isAddingLink:!0,mouseX:t.x,mouseY:t.y})},e.onNodeClick=function(t){e.state.hasClickBeenHandled||("Select"===e.state.currentTool?(e.setState({currentNodeOrLink:t}),e.trackNodeDblClick(t)):"Erase"===e.state.currentTool?(e.deleteNode(t),e.setState({isAddingLink:!1})):"Draw"===e.state.currentTool&&e.handleNodePencilClick(t)),e.setState({selectedNodes:[],hasClickBeenHandled:!0})},e.onNodeDrag=function(t){e.state.selectedNodes.length,e.setState({currentNodeOrLink:t})},e.onNodeDragEnd=function(t){e.graph.current.d3ReheatSimulation(),t.fx=t.x,t.fy=t.y},e.selectNodesInArea=function(t,a,n,r){var o,s=e.graph.current.screen2GraphCoords(t,a),i=s.x,c=s.y,l=e.graph.current.screen2GraphCoords(n,r),u=l.x,d=l.y,m=Math.min(i,u),f=Math.max(i,u),p=Math.min(c,d),h=Math.max(c,d),g=[],b=Object(B.a)(e.props.graph.data.nodes);try{for(b.s();!(o=b.n()).done;){var E=o.value;m<=E.x&&E.x<=f&&p<=E.y&&E.y<=h&&g.push(E)}}catch(v){b.e(v)}finally{b.f()}e.setState({selectedNodes:g}),e.setState({currentNodeOrLink:1===g.length?g[0]:null})},e.trackNodeDblClick=function(t){e.setState((function(a){return a.nodeClicks>=1&&e.unstickNode(t),setTimeout((function(){e.setState({nodeClicks:0})}),200),Object(m.a)(Object(m.a)({},a),{},{nodeClicks:a.nodeClicks+1})}))},e.unstickNode=function(t){delete t.fx,delete t.fy,e.graph.current.d3ReheatSimulation()},e.addLink=function(t,a){var n={id:e.props.graph.data.linkSequence,source:e.props.graph.idToNode[t],target:e.props.graph.idToNode[a],color:e.props.graph.data.settings.defaultLinkColor,width:e.props.graph.data.settings.defaultLinkWidth,notes:"",type:"link"};e.props.addLink(e.props.graph.data.id,n),e.setState({currentNodeOrLink:n})},e.deleteLink=function(t){e.props.deleteLink(e.props.graph.data.id,t),e.setPostDeleteState(t)},e.onLinkClick=function(t){e.state.hasClickBeenHandled||("Select"===e.state.currentTool?e.setState({currentNodeOrLink:t}):"Erase"===e.state.currentTool&&e.deleteLink(t)),e.setState({hasClickBeenHandled:!0})},e.drawCircle=function(e,t,a,n,r){e.beginPath(),e.arc(t,a,n,0,2*Math.PI,!1),e.fillStyle=r,e.fill()},e.drawLine=function(e,t,a,n,r,o,s){e.beginPath(),e.strokeStyle=t,e.lineWidth=a,e.moveTo(n,r),e.lineTo(o,s),e.stroke(),e.closePath()},e.drawLink=function(t,a){e.state.ctx||e.setState({ctx:a});var n=t.source,r=t.target;[e.state.hoveredObject,e.state.currentNodeOrLink].includes(t)&&e.drawLine(a,b,t.width+3,n.x,n.y,r.x,r.y),e.drawLine(a,t.color,t.width,n.x,n.y,r.x,r.y)},e.drawNode=function(t,a,n){e.state.ctx||e.setState({ctx:a});var r=t.label||t.name||"";a.font="".concat(12,"px Sans-Serif");a.measureText(r).width;a.textAlign="center",a.textBaseline="top",a.fillStyle=t.color,a.fillText(r,t.x,t.y+t.val+5);var o=e.state.hoveredObject;[o,e.state.currentNodeOrLink].concat(Object(R.a)(e.state.selectedNodes)).includes(t)?e.drawCircle(a,t.x,t.y,t.val+3,b):o&&("isGroup"in o&&e.props.graph.neighbours[o.id].has(t)||"source"in o&&[o.source,o.target].includes(t))&&e.drawCircle(a,t.x,t.y,t.val+3,E),t===e.state.currentNodeOrLink&&e.state.isAddingLink&&e.drawTempLink(a,t.x,t.y),t.icon||e.drawCircle(a,t.x,t.y,t.val,t.color)},e.drawSelectionBox=function(t,a){var n=e.selectionBox.current,r=Object(M.a)(e.state.selectionStartCoords,2),o=r[0],s=r[1],i=Math.min(o,t),c=Math.min(s,a),l=Math.max(o,t),u=Math.max(s,a);n.style.left=i+"px",n.style.top=c+"px",n.style.width=l-i+"px",n.style.height=u-c+"px"},e.drawTempLink=function(t,a,n){e.drawLine(t,"black",1,a,n,e.state.mouseX,e.state.mouseY)},e.selectTool=function(t){"Draw"!==t&&e.state.isAddingLink&&e.setState({isAddingLink:!1}),"Area select"!==t&&e.state.isSelecting&&e.setState({isSelecting:!1}),e.setState({currentTool:t})},e.setPostDeleteState=function(t){e.setState((function(e){var a=e.currentNodeOrLink;return{currentNodeOrLink:a===t?null:a,hoveredObject:null,shouldPreventZoom:!0}}))},e}return Object(he.a)(a,[{key:"componentDidMount",value:function(){var e=this.graph.current;e.d3Force("center",(function(){return null})),e.d3Force("collide",Object(Ee.a)()),this.setState({zoomAmount:e.zoom()}),document.onkeyup=this.handleKeyPress}},{key:"render",value:function(){var e=this,t={ref:this.contextMenu,closeContextMenu:this.closeContextMenu},a={ref:this.details,nodeOrLink:Object(m.a)({},this.state.currentNodeOrLink)},n={graphData:this.props.graph.data,nodeAutoColorBy:"group",onBackgroundClick:this.onBackgroundClick,onNodeDrag:this.onNodeDrag,onNodeDragEnd:this.onNodeDragEnd,onNodeClick:this.onNodeClick,onNodeHover:this.onHover,nodeCanvasObject:this.drawNode,nodeCanvasObjectMode:function(){return"replace"},onLinkClick:this.onLinkClick,onLinkHover:this.onHover,linkCanvasObject:this.drawLink,d3VelocityDecay:.1,d3AlphaDecay:.1,onZoom:function(){e.state.shouldPreventZoom&&e.setState({shouldPreventZoom:!1},(function(){var t;return null===(t=e.graph.current)||void 0===t?void 0:t.zoom(e.state.zoomAmount)}))},onZoomEnd:function(t){var a=t.k;e.setState({zoomAmount:a})}};return r.a.createElement("main",{id:"dashboard",onClick:this.onClick},this.props.auth.user&&0===this.props.auth.user.id&&r.a.createElement("div",{className:"demo-message"},"DEMO (some features may not work)"),r.a.createElement("div",{ref:this.selectionBox,className:"selection-box",style:{display:this.state.isSelecting?"block":"none"}}),this.state.showContextMenu&&r.a.createElement(se,t),this.state.currentNodeOrLink&&r.a.createElement(we,a),r.a.createElement(Oe,{currentTool:this.state.currentTool,selectTool:this.selectTool}),r.a.createElement("section",{className:"graph",onContextMenu:this.onRightClick,onMouseMove:this.state.isAddingLink||this.state.isSelecting?this.onMouseMove:void 0},r.a.createElement(ve.a,Object.assign({ref:this.graph},n))))}}]),a}(r.a.Component)),xe={addLink:function(e,t){return function(e){e(function(e){return{type:v,link:e}}(t))}},addNode:function(e,t){return function(e){e(function(e){return{type:N,node:e}}(t))}},deleteLink:function(e,t){return function(e){e(function(e){return{type:k,link:e}}(t))}},deleteNode:function(e,t){return function(e){e(function(e){return{type:O,node:e}}(t))}}},Ae=Object(i.b)((function(e){return{auth:e.auth,graph:e.graph}}),xe)(Le),De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(e),a=Object(M.a)(t,2),r=a[0],o=a[1];return{value:r,setValue:o,clear:function(){return o("")},bindProps:{value:r,onChange:function(e){o(e.target.value)}}}},Te=function(e){var t=e.width,a=e.height,o=Object(n.useRef)(),s=Object(n.useState)({nodes:[],links:[]}),i=Object(M.a)(s,2),c=i[0],l=i[1],u=function(e,t){var a=Object(R.a)(e),n=Object(R.a)(t),r=a.length?a[a.length-1].id+1:0,o=d(),s=o.x,i=o.y;if(Math.random()>.3?a.push({id:r,fx:s,fy:i}):a.push({id:r,x:s,y:i}),a.length>10){var c=a[0];a.shift(),n=n.filter((function(e){return e.source!==c&&e.target!==c}))}for(var l=0;l<4;l++){var u=a[Math.round(Math.random()*a.length-1)];u&&u.id!==r&&n.push({source:r,target:u.id})}return{nodes:a,links:n}},d=function(){return o.current.screen2GraphCoords(Math.round(Math.random()*t),Math.round(Math.random()*a))};return Object(n.useEffect)((function(){!function(){for(var e={nodes:[],links:[]},t=0;t<10;t++)Object.assign(e,u(e.nodes,e.links));l(e)}();var e=setInterval((function(){l((function(e){var t=e.nodes,a=e.links;return u(t,a)}))}),1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{id:"home-bg"},r.a.createElement(ve.a,{ref:o,graphData:c,d3VelocityDecay:1,d3AlphaDecay:1,linkWidth:2,nodeRelSize:5}))},Pe={signup:function(e){return function(t){q.signup(e).then((function(){window.location.href="/login"})).catch(console.log)}}},Fe=Object(i.b)((function(e){return{authErrors:e.auth.errors}}),Pe)((function(e){var t=e.authErrors,a=e.signup,o=De(""),s=o.value,i=o.bindProps,l=De(""),u=l.value,d=l.bindProps,f=De(""),p=f.value,h=f.bindProps,g=De(""),b=g.value,E=g.bindProps,v=Object(n.useState)({}),N=Object(M.a)(v,2),k=N[0],O=N[1],y=Object(n.useState)(!1),S=Object(M.a)(y,2),C=S[0],j=S[1];return Object(n.useEffect)((function(){C&&O((function(e){var a=Object(m.a)(Object(m.a)({},e),t);return s?delete a.name:a.name="Please enter a name",u?delete a.email:a.email="Please enter an email",p?delete a.password:a.password="Please enter a password",p!==b?a.password2="Passwords do not match":delete a.password2,a}))}),[C,s,u,p,b,t]),r.a.createElement("main",{id:"signup",className:"auth-page main-container"},r.a.createElement(Te,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("div",{className:"auth-form-container"},r.a.createElement("h1",null,"Sign in"),r.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),j(!0),0===Object.keys(k).length)&&a({name:s,email:u,password:p})},noValidate:!0},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-email"},"Name"),r.a.createElement("input",Object.assign({className:k.name?"form-input-error":"form-input",type:"text",id:"signup-name",name:"name",placeholder:"Name",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0,required:!0},i)),r.a.createElement("div",{className:"form-input-error-text"},k.name)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-email"},"Email"),r.a.createElement("input",Object.assign({className:k.email?"form-input-error":"form-input",type:"text",id:"signup-email",name:"email",placeholder:"Email",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",required:!0},d)),r.a.createElement("div",{className:"form-input-error-text"},k.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-password"},"Password"),r.a.createElement("input",Object.assign({className:k.password?"form-input-error":"form-input",type:"password",id:"signup-password",name:"password",placeholder:"Password",autoComplete:"off",required:!0},h)),r.a.createElement("div",{className:"form-input-error-text"},k.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-password2"},"Confirm password"),r.a.createElement("input",Object.assign({className:k.password2?"form-input-error":"form-input",type:"password",id:"signup-password2",name:"password2",placeholder:"Confirm password",autoComplete:"off",required:!0},E)),r.a.createElement("div",{className:"form-input-error-text"},k.password2)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"form-submit",type:"submit",disabled:!0,title:"Not available in client demo"},"SIGN UP")))),r.a.createElement("div",{className:"auth-form-container"},"Already have an account? ",r.a.createElement(c.b,{to:"/login",className:"form-link"},"Login")))})),Ge=(a(143),{login:function(e,t){return function(a){q.login(e,t).then((function(e){q.setAuthToken(e.data.token),a(X(e.data.user)),window.location.href="/"})).catch(console.log)}}}),Ie=Object(i.b)((function(e){return{auth:e.auth}}),Ge)((function(e){var t=e.login,a=De(""),o=a.value,s=a.bindProps,i=De(""),l=i.value,u=i.bindProps,d=Object(n.useState)({}),f=Object(M.a)(d,2),p=f[0],h=f[1],g=Object(n.useState)(!1),b=Object(M.a)(g,2),E=b[0],v=b[1];return Object(n.useEffect)((function(){E&&h((function(e){var t=Object(m.a)({},e);return o?delete t.email:t.email="Please enter an email",l?delete t.password:t.password="Please enter a password",t}))}),[E,o,l]),r.a.createElement("main",{id:"login",className:"auth-page main-container"},r.a.createElement(Te,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("div",{className:"auth-form-container"},r.a.createElement("h1",null,"Login to continue"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v(!0),0===Object.keys(p).length&&t(o,l)},noValidate:!0},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"login-email"},"Email"),r.a.createElement("input",Object.assign({className:p.email?"form-input-error":"form-input",type:"text",id:"login-email",name:"email",placeholder:"Email",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0},s)),r.a.createElement("div",{className:"form-input-error-text"},p.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"login-password"},"Password"),r.a.createElement("input",Object.assign({className:p.password?"form-input-error":"form-input",type:"password",id:"login-password",name:"password",placeholder:"Password",autoComplete:"off",required:!0},u)),r.a.createElement("div",{className:"form-input-error-text"},p.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"form-submit",type:"submit",disabled:!0,title:"Not available in client demo"},"LOGIN")))),r.a.createElement("div",{className:"auth-form-container"},"Don't have an account? ",r.a.createElement(c.b,{to:"/signup",className:"form-link"},"Sign up")))})),Be=(a(144),{loadTestGraph:$,loginSuccess:X}),Ue=Object(i.b)(null,Be)((function(e){var t=e.loadTestGraph,a=e.loginSuccess,o=Object(n.useState)(!1),s=Object(M.a)(o,2),i=s[0],l=s[1];return r.a.createElement("main",{id:"home",className:"main-container"},r.a.createElement(Te,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("h1",{className:"main-title"},r.a.createElement("span",{className:"thin"},"Welcome to"),"\u2002",!i&&"MAPSOC",r.a.createElement("img",{className:"logo",src:"/MapSoc-client/logo-big-home.png",alt:"Logo",style:i?{marginLeft:"2px"}:{width:0},onLoad:function(){return l(!0)}})),r.a.createElement("div",{className:"auth-links"},r.a.createElement(c.b,{to:"/login",style:{backgroundColor:"rgba(137, 188, 219, 0.3)"}},"Login"),r.a.createElement(c.b,{to:"/signup"},"Sign up")),r.a.createElement("div",{className:"demo-wrapper"},"Or check out the ",r.a.createElement("button",{className:"demo-btn",onClick:function(){a({id:0,name:"Test User",email:"test@mapsoc.com"}),t()}},"DEMO")))})),Me=(a(145),function(e){var t=e.errors,a=e.resetUserErrors,o=e.updateUser,s=e.user,i=De(s.name),c=i.value,l=i.bindProps,u=De(s.email),d=u.value,m=u.bindProps,f=Object(n.useState)(!1),p=Object(M.a)(f,2),h=p[0],g=p[1];return Object(n.useEffect)((function(){g(!!c&&!!d&&(c!==s.name||d!==s.email))}),[c,d]),Object(n.useEffect)((function(){return function(){return a()}}),[]),r.a.createElement("section",{className:"profile"},r.a.createElement("h1",null,"Edit Profile"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===Object.keys(t).length&&o(s.id,{name:c,email:d})},noValidate:!0},r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"name"},"Name"),r.a.createElement("input",Object.assign({type:"text",id:"name",className:"form-input"},l))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"email"},"Email"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"email",id:"email",className:"form-input"},m)),r.a.createElement("div",{className:"form-input-error-text"},t.email))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!h},"Update"))))}),Re=function(e){var t=e.errors,a=e.resetUserErrors,o=e.user,s=e.updateUser,i=De(""),c=i.value,l=i.bindProps,u=De(""),d=u.value,m=u.bindProps,f=De(""),p=f.value,h=f.bindProps,g=Object(n.useState)(!1),b=Object(M.a)(g,2),E=b[0],v=b[1];return Object(n.useEffect)((function(){v(!!c&&!!d&&!!p&&d===p)}),[c,d,p]),Object(n.useEffect)((function(){return function(){return a()}}),[]),r.a.createElement("section",{className:"security"},r.a.createElement("h1",null,"Security"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===Object.keys(t).length&&s(o.id,{currPassword:c,newPassword:d})},noValidate:!0},r.a.createElement("h2",null,"Change Password"),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"currPassword"},"Current"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"password",id:"currPassword",className:"form-input"},l)),r.a.createElement("div",{className:"form-input-error-text"},t.currPassword))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"newPassword"},"New"),r.a.createElement("input",Object.assign({type:"password",id:"newPassword",className:"form-input"},m))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"newPassword2"},"Re-type new"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"password",id:"newPassword2",className:"form-input"},h)),r.a.createElement("div",{className:"form-input-error-text"},d!==p?"Passwords do not match":""))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!E},"Update"))))},_e=(a(146),function(e){var t=e.graph,a=e.updateGraphSettings,o=Object(n.useState)(t.settings.defaultNodeColor),s=Object(M.a)(o,2),i=s[0],c=s[1],l=Object(n.useState)(t.settings.defaultNodeSize.toString()),u=Object(M.a)(l,2),d=u[0],m=u[1],f=Object(n.useState)(t.settings.defaultLinkColor),p=Object(M.a)(f,2),h=p[0],g=p[1],b=Object(n.useState)(t.settings.defaultLinkWidth.toString()),E=Object(M.a)(b,2),v=E[0],N=E[1],k=Object(n.useState)([0,0]),O=Object(M.a)(k,2),y=O[0],S=O[1],C=Object(n.useRef)(null),j=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(C.current){var e=C.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t.scale(2.2,2.2);var a=e.width/4.4,n=e.height/4.4;t.beginPath(),t.arc(a,n,parseInt(d),0,2*Math.PI,!1),t.fillStyle=i,t.fill()}}),[i,d,C,y]),Object(n.useEffect)((function(){if(j.current){var e=j.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t.scale(2.2,2.2),t.beginPath(),t.strokeStyle=h,t.lineWidth=parseInt(v),t.moveTo(10,e.height/2.2-10),t.lineTo(e.width/2.2-10,10),t.stroke(),t.closePath()}}),[h,v,j,y]),Object(n.useLayoutEffect)((function(){var e=function(){S([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),r.a.createElement("section",{className:"settings"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={defaultNodeColor:i,defaultNodeSize:parseInt(d),defaultLinkColor:h,defaultLinkWidth:parseInt(v)};a(t.id,n)},noValidate:!0},r.a.createElement("h1",null,"Settings"),r.a.createElement("section",{id:"node-settings"},r.a.createElement("h2",null,"Nodes"),r.a.createElement("div",{className:"form-col-wrapper"},r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement("canvas",{ref:C,id:"node-icon-cvs",style:{width:"100%",height:"100%"}})),r.a.createElement("div",{className:"node-settings-controls"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},"Default node color"),r.a.createElement(te,{value:i,onColorChange:function(e){return c(e)},width:"100%",height:"30px"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},r.a.createElement("span",null,"Default node size"),r.a.createElement("span",null,d)),r.a.createElement(oe,{color:i,id:"defaultNodeSize",label:"Default node size",min:1,max:10,onChange:function(e){return m(e.currentTarget.value.toString())},value:d}))))),r.a.createElement("section",{id:"link-settings"},r.a.createElement("h2",null,"Links"),r.a.createElement("div",{className:"form-col-wrapper"},r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement("canvas",{ref:j,id:"link-icon-cvs",style:{width:"100%",height:"100%"}})),r.a.createElement("div",{className:"link-settings-controls"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},"Default link color"),r.a.createElement(te,{value:h,onColorChange:function(e){return g(e)},width:"100%",height:"30px"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},r.a.createElement("span",null,"Default link width"),r.a.createElement("span",null,v)),r.a.createElement(oe,{color:h,id:"defaultLinkWidth",label:"Default link width",min:1,max:10,onChange:function(e){return N(e.currentTarget.value.toString())},value:v})))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!function(){var e=t.settings;return i!==e.defaultNodeColor||parseInt(d)!==e.defaultNodeSize||h!==e.defaultLinkColor||parseInt(v)!==e.defaultLinkWidth}()},"Update")))))}),He=(a(147),{handleKeyboardShortcut:J,loadTestGraph:$,logout:function(){return function(e){e({type:G.LOGOUT}),q.logout(),window.location.href="/MapSoc-client"}}}),ze=Object(i.b)((function(e){return{auth:e.auth}}),He)((function(e){var t=e.auth,a=e.children,o=e.handleKeyboardShortcut,s=(e.loadTestGraph,e.logout),i=Object(n.useState)(!1),c=Object(M.a)(i,2),u=c[0],d=c[1],m=Object(l.g)(),f=function(){d(!u)};return Object(n.useEffect)((function(){o(!u)}),[u]),r.a.createElement("div",{id:"app"},"/"!==m.pathname&&r.a.createElement(fe,{isLoggedIn:t.isLoggedIn,logout:s,toggleModal:f}),u&&r.a.createElement(ce,null,r.a.createElement(me,{toggleModal:f})),r.a.createElement(l.d,null,r.a.Children.map(a,(function(e){return r.a.cloneElement(e,{isLoggedIn:t.isLoggedIn})}))))}));a(148);window.console||(window.console={});for(var Ke=0,We=["debug","warn","info"];Ke<We.length;Ke++){console[We[Ke]]=function(){}}Object(o.render)(r.a.createElement(i.a,{store:z},r.a.createElement(c.a,{basename:"/MapSoc-client/"},r.a.createElement(ze,null,r.a.createElement(ne,{exact:!0,path:"/",component:Ue}),r.a.createElement(ne,{path:"/login",component:Ie}),r.a.createElement(ne,{path:"/signup",component:Fe}),r.a.createElement(re,{path:"/dashboard",component:Ae}),r.a.createElement(l.a,{to:"/"})))),document.getElementById("app"))},98:function(e,t,a){e.exports=a(149)}},[[98,1,2]]]);
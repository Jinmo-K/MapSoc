(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(25),s=a.n(o),c=a(7),i=a(9),l=a(20),u=a(23),d=a(76),m=a(2),f="#A9A9A9",p=2,g="#408ab8",h=5,b="rgba(255, 188, 71, 0.7)",E="rgba(255, 188, 71, 0.3)",v="ADD_LINK",N="ADD_NODE",O="DELETE_LINK",k="DELETE_NODE",S="GET_GRAPH_BEGIN",j="GET_GRAPH_FAILURE",C="GET_GRAPH_SUCCESS",y="SAVE_LINK_SUCCESS",w="SAVE_NODE_SUCCESS",L="UPDATE_GRAPH_BEGIN",x="UPDATE_GRAPH_FAILURE",D="UPDATE_GRAPH_SUCCESS",P="UPDATE_GRAPH_SETTINGS_SUCCESS",A="UPDATE_LINK",T="UPDATE_NODE",I={LOGIN_FAILURE:"LOGIN_FAILURE",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGOUT:"LOGOUT",RESET_USER_ERRORS:"RESET_USER_ERRORS",UPDATE_USER_FAILURE:"UPDATE_USER_FAILURE",UPDATE_USER_SUCCESS:"UPDATE_USER_SUCCESS",LOGIN_ENDPOINT:"/api/users/login",SIGNUP_ENDPOINT:"/api/users/signup",USERS_ENDPOINT:"/api/users/"},U={errors:{},isLoggedIn:!1,user:{}},R=a(12),F=a(33),G=a(3),M=a(19),_={data:{nodes:[],links:[],linkSequence:0,nodeSequence:0,settings:{defaultLinkColor:f,defaultLinkWidth:p,defaultNodeColor:g,defaultNodeSize:h}},idToLink:{},idToNode:{},isLoading:!1,isUpdating:!1,neighbours:{}},B=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I.LOGIN_FAILURE:return Object(m.a)(Object(m.a)({},e),{},{errors:t.errors});case I.LOGIN_SUCCESS:return Object(m.a)(Object(m.a)({},e),{},{errors:{},isLoggedIn:!0,user:t.user});case I.LOGOUT:return{errors:{},isLoggedIn:!1,user:{}};case I.RESET_USER_ERRORS:return Object(m.a)(Object(m.a)({},e),{},{errors:{}});case I.UPDATE_USER_FAILURE:return Object(m.a)(Object(m.a)({},e),{},{errors:t.errors});case I.UPDATE_USER_SUCCESS:return Object(m.a)(Object(m.a)({},e),{},{errors:{},user:t.user});default:return e}},graph:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,a=Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)({},e.data)});switch(t.type){case v:a.data=Object(m.a)(Object(m.a)({},e.data),{},{links:[].concat(Object(M.a)(e.data.links),[t.link])});var n=a.data.nodes.filter((function(e){return e===t.link.source||e===t.link.target})),r=Object(G.a)(n,2),o=r[0],s=r[1];if(a.neighbours[o.id].add(s),a.neighbours[s.id].add(o),o.isGroup&&s.isGroup){var c=o===t.link.target?o:s;c.groups.push(o===t.link.source?o.id:s.id)}else o.isGroup?s.groups.push(o.id):s.isGroup&&o.groups.push(s.id);return a.idToLink[t.link.id]=t.link,a.data.linkSequence++,a;case N:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),{},{nodes:[].concat(Object(M.a)(e.data.nodes),[t.node]),nodeSequence:e.data.nodeSequence+1}),idToNode:Object(m.a)(Object(m.a)({},e.idToNode),{},Object(F.a)({},t.node.id,t.node)),neighbours:Object(m.a)(Object(m.a)({},e.neighbours),{},Object(F.a)({},t.node.id,new Set))});case O:var i=t.link,l=i.source,u=i.target;return a.data.links=e.data.links.filter((function(e){return e!==i})),l.groups=l.groups.filter((function(e){return e!==u.id})),u.groups=u.groups.filter((function(e){return e!==l.id})),a.neighbours[u.id].delete(l),a.neighbours[l.id].delete(u),a;case k:var d=t.node;a.data.nodes=e.data.nodes.filter((function(e){return e!==d}));var f=e.neighbours[d.id];return f.forEach((function(e){a.neighbours[e.id].delete(d),e.groups=e.groups.filter((function(e){return e!==d.id}))})),a.data.links=e.data.links.filter((function(e){return e.source!==d&&e.target!==d})),delete a.idToNode[d.id],a;case S:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case j:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1});case C:a.data=Object(m.a)({},t.graph);var p,g=Object(R.a)(a.data.nodes);try{for(g.s();!(p=g.n()).done;){var h=p.value;a.idToNode[h.id]=h,a.neighbours[h.id]=new Set}}catch(U){g.e(U)}finally{g.f()}var b,E=Object(R.a)(a.data.links);try{for(E.s();!(b=E.n()).done;){var y=b.value;a.idToLink[y.id]=y,a.neighbours[y.source].add(a.idToNode[y.target]),a.neighbours[y.target].add(a.idToNode[y.source])}}catch(U){E.e(U)}finally{E.f()}return Object(m.a)(Object(m.a)({},a),{},{isLoading:!0});case L:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!0});case x:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!1});case P:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),{},{settings:t.values})});case D:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),t.values),isUpdating:!1});case A:var w=a.data.links.find((function(e){return e.source===t.link.source&&e.target===t.link.target}));return Object.assign(w,t.link),a;case T:var I=a.idToNode[t.node.id];return I.isGroup!==t.node.isGroup&&a.neighbours[I.id].forEach((function(e){t.node.isGroup&&!e.isGroup?e.groups.push(t.node.id):e.groups=e.groups.filter((function(e){return e!==t.node.id}))})),Object.assign(I,t.node),a;default:return e}}}),z=Object(u.d)(B,Object(u.a)(d.a)),H=a(6),W=a.n(H),q={setAuthToken:function(e){localStorage.token=e,W.a.defaults.headers.common.Authorization=e},get:function(e){return W.a.get(I.USERS_ENDPOINT+e)},update:function(e,t){return W.a.put(I.USERS_ENDPOINT+e,t)},login:function(e,t){return W.a.post(I.LOGIN_ENDPOINT,{username:e,password:t})},logout:function(){localStorage.removeItem("token"),delete W.a.defaults.headers.common.Authorization},signup:function(e){return W.a.post(I.SIGNUP_ENDPOINT,e)}};var X=function(e){return{type:I.LOGIN_SUCCESS,user:e}},Y={id:1011,links:[{id:0,notes:"",type:"link",source:"0",target:"2",style:{color:f,width:p}},{id:1,notes:"",type:"link",source:"0",target:"3",style:{color:f,width:p}},{id:2,notes:"",type:"link",source:"0",target:"4",style:{color:f,width:p}},{id:3,notes:"",type:"link",source:"3",target:"4",style:{color:f,width:p}},{id:4,notes:"",type:"link",source:"1",target:"2",style:{color:f,width:p}},{id:5,notes:"",type:"link",source:"1",target:"5",style:{color:f,width:p}}],nodes:[{id:"0",name:"School",type:"node",style:{color:"#7ac77d",size:7},fx:0,fy:0,groups:[],notes:"",isGroup:!0},{id:"1",name:"Work",type:"node",style:{color:"#4cc8b3",size:7},fx:-35,fy:60,groups:[],notes:"",isGroup:!0},{id:"2",name:"Mary",type:"node",groups:["1","0"],style:{color:g,size:2},notes:"",isGroup:!1},{id:"3",name:"Roy",type:"node",groups:["0"],style:{color:g,size:h},notes:"",isGroup:!1},{id:"4",name:"Frank",type:"node",groups:["0"],style:{color:g,size:h},notes:"",isGroup:!1},{id:"5",name:"Melanie",type:"node",groups:["1"],style:{color:g,size:h},notes:"",isGroup:!1}],linkSequence:6,nodeSequence:6,settings:{defaultLinkColor:f,defaultLinkWidth:p,defaultNodeColor:g,defaultNodeSize:h}},V=function(e){return{type:C,graph:e}},K=function(){return function(e){e(V(Y))}},Z=(a(123),[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]),J=["#FFFFFF","#F2F2F2","#E6E6E6","#CCCCCC","#B3B3B3","#999999","#808080","#666666","#4C4C4C","#000000"],Q=function(e){var t=e.value,a=e.onColorChange,o=e.width,s=e.height,c=Object(n.useState)(t),i=Object(G.a)(c,2),l=i[0],u=i[1],d=Object(n.useState)(!1),m=Object(G.a)(d,2),f=m[0],p=m[1],g=Object(n.useRef)(null),h=function(e){return e.map((function(e){return r.a.createElement("div",{className:l===e?"color-picker-palette-cell color-picker-palette-cell-selected":"color-picker-palette-cell",style:{background:e},onClick:function(){return function(e){a(e),p(!1)}(e)},key:e})}))},b=Object(n.useCallback)((function(e){e.target.className.includes("color-picker-")||p(!1)}),[]);return Object(n.useEffect)((function(){f?document.addEventListener("click",b):document.removeEventListener("click",b)}),[f,b]),Object(n.useEffect)((function(){return function(){return document.removeEventListener("click",b)}}),[b]),Object(n.useEffect)((function(){u(t)}),[t]),r.a.createElement("div",{className:"color-picker",style:{width:o||"100%",height:s||"100%"}},r.a.createElement("div",{className:"color-picker-selector",onClick:function(){p(!f)}},r.a.createElement("div",{className:"color-picker-selector-current",style:{background:l}})),f&&r.a.createElement("div",{ref:g,className:"color-picker-palette"},r.a.createElement("div",{className:"color-picker-default-palette"},Z.map((function(e){return r.a.createElement("div",{key:e[0],className:"color-picker-palette-col"},h(e))})),r.a.createElement("div",{className:"color-picker-palette-row"},h(J)))))},$=a(45),ee=function(e){var t=e.component,a=e.isLoggedIn,n=Object($.a)(e,["component","isLoggedIn"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(l.a,{to:"/dashboard"}):r.a.createElement(t,e)}}))},te=function(e){var t=e.component,a=e.isLoggedIn,n=Object($.a)(e,["component","isLoggedIn"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))},ae=(a(125),function(e){var t=e.color,a=void 0===t?"white":t,o=e.id,s=e.label,c=e.max,i=e.min,l=e.onChange,u=e.onMouseUp,d=void 0===u?function(){}:u,m=e.value,f=Object(n.useRef)(null),p=Object(n.useState)(0),g=Object(G.a)(p,2),h=g[0],b=g[1];return Object(n.useEffect)((function(){var e=(f.current.getBoundingClientRect().width-15)/(c-i),t=e*parseInt(m)-e+2.5;b(t)}),[m]),r.a.createElement("div",{className:"range-slider"},r.a.createElement("div",{className:"custom-slider-wrapper"},r.a.createElement("div",{className:"custom-slider-range"}),r.a.createElement("div",{className:"custom-slider-knob",style:{background:a,left:h,opacity:f.current?"100%":"0",transform:f.current?"scale(1)":"scale(0)"}})),r.a.createElement("label",{className:"sr-only",htmlFor:o,style:{textTransform:"uppercase"}},s),r.a.createElement("input",{ref:f,id:o,className:"input-slider",type:"range",min:i,max:c,onChange:l,onMouseUp:d,value:m}))}),ne=(a(126),r.a.forwardRef((function(e,t){e.closeContextMenu;return r.a.createElement("div",{ref:t,id:"context-menu"},r.a.createElement("ul",null,r.a.createElement("strong",null,"Add new")))}))),re=(a(127),document.getElementById("modalRoot")),oe=function(e){var t=e.children,a=Object(n.useState)(document.createElement("div")),r=Object(G.a)(a,2),o=r[0];r[1];return Object(n.useEffect)((function(){return re.appendChild(o),function(){re.removeChild(o)}}),[]),s.a.createPortal(t,o)},se={resetUserErrors:function(){return function(e){e({type:I.RESET_USER_ERRORS})}},updateUser:function(e,t){return function(e){}},updateGraphSettings:function(e,t){return function(e){e(function(e){return{type:P,values:e}}(t))}}},ce=Object(c.b)((function(e){return{user:e.auth.user,errors:e.auth.errors,graph:e.graph.data}}),se)((function(e){var t=e.errors,a=e.graph,n=e.page,o=e.resetUserErrors,s=e.user,c=e.updateGraphSettings,i=e.updateUser;return"Profile"===n?r.a.createElement(Re,{errors:t,resetUserErrors:o,user:s,updateUser:i}):"Security"===n?r.a.createElement(Fe,{errors:t,resetUserErrors:o,user:s,updateUser:i}):r.a.createElement(Ge,{graph:a,updateGraphSettings:c})})),ie=function(e){var t=e.currentPage,a=e.setCurrentPage;return r.a.createElement("nav",{className:"modal-nav","aria-label":"Settings navigation"},r.a.createElement("button",{className:"Profile"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Edit profile",onClick:function(){return a("Profile")}},r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("button",{className:"Security"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Security",onClick:function(){return a("Security")}},r.a.createElement("i",{className:"fas fa-lock"})),r.a.createElement("button",{className:"Settings"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Settings",onClick:function(){return a("Settings")}},r.a.createElement("i",{className:"fas fa-cog"})))},le=function(e){var t=e.toggleModal,a=Object(n.useState)("Profile"),o=Object(G.a)(a,2),s=o[0],c=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"overlay",onClick:t}),r.a.createElement("div",{className:"modal-container"},r.a.createElement(ie,{currentPage:s,setCurrentPage:c}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(ce,{page:s})),r.a.createElement("button",{className:"btn modal-close fadein-btn",onClick:t},"\xd7"))))},ue=(a(128),function(e){var t=e.isLoggedIn,a=e.logout,n=e.toggleModal;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(i.b,{to:"/",role:"banner",className:"navbar-brand"},r.a.createElement("img",{src:"/logo-small.png",alt:"Logo"})),t&&r.a.createElement("section",{className:"user-menu"},r.a.createElement("button",{className:"btn navbar-btn fadein-btn",title:"Edit profile",onClick:n},r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("button",{className:"btn navbar-btn fadein-btn",title:"Logout",onClick:a},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))))}),de=a(78),me=a(79),fe=a(90),pe=a(89),ge=a(88),he=a(44),be=(a(140),["Select","Draw","Erase","Area select"]),Ee={Select:r.a.createElement("i",{className:"fas fa-mouse-pointer"}),Draw:r.a.createElement("i",{className:"fas fa-pencil-alt"}),Erase:r.a.createElement("i",{className:"fas fa-eraser"}),"Area select":r.a.createElement("i",{className:"fas fa-vector-square"})},ve=r.a.memo((function(e){var t=e.selectTool,a=Object(n.useState)("pointer"),o=Object(G.a)(a,2),s=o[0],c=o[1];return r.a.createElement("section",{className:"toolbar"},be.map((function(e){return r.a.createElement("button",{id:e+"-btn",key:e,name:e,className:s===e?"btn toolbar-btn toolbar-btn-selected":"btn toolbar-btn",onClick:function(){c(e),t(e)},title:e+" (".concat(e.charAt(0),")")},Ee[e])})))})),Ne=function(e){var t=e.onNotesBlur,a=e.onChange,o=e.notes,s=Object(n.useState)(!1),c=Object(G.a)(s,2),i=c[0],l=c[1],u=Object(n.useRef)(null);return r.a.createElement("section",{className:"details-notes"},r.a.createElement("h2",null,"Notes",!i&&r.a.createElement("button",{onClick:function(){l(!0),u.current.disabled=!1,u.current.focus()},className:"edit-icon-btn"},r.a.createElement("i",{className:"far fa-edit"}))),r.a.createElement("textarea",{ref:u,id:"notes",onBlur:function(){l(!1),u.current.disabled=!0,t()},onChange:a,value:o,spellCheck:!1,disabled:!0}))},Oe=r.a.memo((function(e){var t=e.graphId,a=e.node,o=e.nodeIndex,s=e.updateNode,c=e.saveNode,i=Object(n.useState)(a.name),l=Object(G.a)(i,2),u=l[0],d=l[1],f=Object(n.useState)(!a.name),p=Object(G.a)(f,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(G.a)(b,2),v=E[0],N=E[1],O=Object(n.useState)(a.isGroup),k=Object(G.a)(O,2),S=k[0],j=k[1],C=Object(n.useState)(a.style.size.toString()),y=Object(G.a)(C,2),w=y[0],L=y[1],x=Object(n.useState)(a.style.color),D=Object(G.a)(x,2),P=D[0],A=D[1],T=Object(n.useState)(a.notes),I=Object(G.a)(T,2),U=I[0],R=I[1],F=Object(n.useRef)(Object(m.a)(Object(m.a)({},a),{},{style:Object(m.a)({},a.style)})),M=Object(n.useCallback)((function(e){e.target.className.includes("slider")||N(!1)}),[]),_=function(){var e=o[a.id];return Object(m.a)(Object(m.a)({},e),{},{style:Object(m.a)({},e.style)})},B=function(e){F.current=Object(m.a)(Object(m.a)({},e),{},{style:Object(m.a)({},e.style)}),W(F.current),d(e.name),j(e.isGroup),h(!e.name),N(!1),L(e.style.size.toString()),A(e.style.color),R(e.notes)},z=function(){h(!1),c(t,_())},H=function(e){var a=e.currentTarget.id,n=e.currentTarget.value,r=_();["name","notes"].includes(a)?"name"===a?(d(n),r.name=n):(R(n),r.notes=n):["size"].includes(a)&&("size"===a&&(L(n),r.style.size=parseInt(n)),c(t,r)),s(r)},W=function(e){delete e.x,delete e.y,delete e.fx,delete e.fy};return Object(n.useEffect)((function(){a.id!==F.current.id&&B(a)}),[a,B]),Object(n.useEffect)((function(){v?document.addEventListener("click",M):document.removeEventListener("click",M)}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"details-node-icon-header"},r.a.createElement("i",{className:"fas fa-circle details-node-icon",style:{color:P}})),r.a.createElement("h1",{className:"details-node-header"},g?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"sr-only",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"name-input",id:"name",type:"text",onKeyDown:function(e){if(13===e.keyCode)switch(e.currentTarget.id){case"name":z()}},onBlur:z,value:u,onChange:H,autoFocus:!0,autoComplete:"off"})):r.a.createElement(r.a.Fragment,null,u||"...",r.a.createElement("button",{onClick:function(){return h(!0)},className:"edit-icon-btn"},r.a.createElement("i",{className:"far fa-edit"})))),a.groups.length>0&&r.a.createElement("p",{className:"details-groups"},"Member of:\u2002",a.groups.map((function(e,t){var n=t===a.groups.length-1?o[e].name:o[e].name+", ";return r.a.createElement("span",{key:e},n)}))),r.a.createElement("div",{className:"details-button-row"},r.a.createElement("div",{className:"details-button-row-btn",title:"Change color"},r.a.createElement(Q,{value:P,onColorChange:function(e){A(e);var a=_();a.style.color=e,c(t,a),s(a)}})),r.a.createElement("button",{className:"details-button-row-btn",title:"Change size",onClick:function(){return N(!v)}},r.a.createElement("i",{className:"fas fa-expand-alt details-button-row-btn-icon",style:{color:P}})),v&&r.a.createElement("div",{className:"size-slider-wrapper"},r.a.createElement("div",{className:"size-slider-label"},r.a.createElement("span",null,"Size"),r.a.createElement("span",null,w)),r.a.createElement(ae,{color:P,id:"size",label:"Node size",min:1,max:10,onChange:H,onMouseUp:function(){return N(!1)},value:w})),r.a.createElement("button",{className:"details-button-row-btn",onClick:function(){var e=_();j(!S),e.isGroup=!S,c(t,e),s(e)}},S?r.a.createElement("i",{className:"fas fa-house-user details-button-row-btn-icon",style:{color:P}}):r.a.createElement("i",{className:"fas fa-user",style:{color:P}}))),r.a.createElement(Ne,{onNotesBlur:function(){c(t,_())},onChange:H,notes:U}),function(){var e=F.current;return u!==e.name||S!==e.isGroup||w!==e.style.size.toString()||P!==e.style.color||U!==e.notes}()&&r.a.createElement("button",{id:"details-undo-btn",className:"details-btn",onClick:function(){B(F.current),s(F.current),c(t,F.current)},style:{color:P,borderColor:P},title:"Undo changes"},r.a.createElement("i",{className:"fas fa-undo"})))}),(function(e,t){var a=e.node,n=t.node;return a.id===n.id&&a.groups.length===n.groups.length&&a.name===n.name&&a.notes===n.notes})),ke=r.a.memo((function(e){var t=e.link,a=e.linkIndex,o=e.graphId,s=e.saveLink,c=e.updateLink,i=Object(n.useState)(t.style.color),l=Object(G.a)(i,2),u=l[0],d=l[1],f=Object(n.useState)(t.notes||""),p=Object(G.a)(f,2),g=p[0],h=p[1],b=Object(n.useState)(t.style.width.toString()),E=Object(G.a)(b,2),v=E[0],N=E[1],O=Object(n.useState)(!1),k=Object(G.a)(O,2),S=k[0],j=k[1],C=Object(n.useRef)(Object(m.a)(Object(m.a)({},t),{},{style:Object(m.a)({},t.style)})),y=Object(n.useCallback)((function(e){e.target.className.includes("slider")||j(!1)}),[]),w=function(){var e=a[t.id];return Object(m.a)(Object(m.a)({},e),{},{style:Object(m.a)({},e.style)})},L=function(e){C.current=Object(m.a)(Object(m.a)({},e),{},{style:Object(m.a)({},e.style)}),d(e.style.color),h(e.notes),N(e.style.width.toString())},x=function(e){var t=e.currentTarget.id,a=e.currentTarget.value,n=w();["width"].includes(t)?("width"===t&&(N(a),n.style.width=parseInt(a)),s(o,n)):"notes"===t&&(h(a),n.notes=a),c(n)},D=function(e){var t=e.style.color;return r.a.createElement("div",{className:"details-link-header-node"},r.a.createElement("i",{className:e.isGroup?"fas fa-house-user details-link-header-node-icon":"fas fa-user details-link-header-node-icon",style:{color:t}}),r.a.createElement("span",null,e.name))};return Object(n.useEffect)((function(){t.id!==C.current.id&&L(t)}),[t,L]),Object(n.useEffect)((function(){S?document.addEventListener("click",y):document.removeEventListener("click",y)}),[S]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"details-link-header"},D(t.source),r.a.createElement("div",{className:"details-link-header-link-icon",style:{background:u,width:parseInt(v)+2}}),D(t.target)),r.a.createElement("div",{className:"details-button-row"},r.a.createElement("div",{className:"details-button-row-btn",title:"Change color"},r.a.createElement(Q,{value:u,onColorChange:function(e){var t=w();d(e),t.style.color=e,s(o,t),c(t)}})),r.a.createElement("button",{className:"details-button-row-btn",title:"Change width",onClick:function(){return j(!S)}},r.a.createElement("i",{className:"fas fa-expand-alt details-button-row-btn-icon",style:{color:u}})),S&&r.a.createElement("div",{className:"size-slider-wrapper"},r.a.createElement("div",{className:"size-slider-label"},r.a.createElement("span",null,"Width"),r.a.createElement("span",null,v)),r.a.createElement(ae,{color:u,id:"width",label:"Link width",min:1,max:10,onChange:x,onMouseUp:function(){return j(!1)},value:v}))),r.a.createElement(Ne,{onNotesBlur:function(){s(o,t)},onChange:x,notes:g}),function(){var e=C.current;return v!==e.style.width.toString()||u!==e.style.color||g!==e.notes}()&&r.a.createElement("button",{id:"details-undo-btn",className:"details-btn",onClick:function(){L(C.current),c(C.current),s(o,C.current)},style:{color:u,borderColor:u},title:"Undo changes"},r.a.createElement("i",{className:"fas fa-undo"})))}),(function(e,t){var a=e.link,n=t.link;return a.id===n.id&&a.notes===n.notes&&a.source===n.source&&a.target===n.target})),Se=(a(141),{saveLink:function(e,t){return function(e){e(function(e){return{type:y,link:e}}(t))}},saveNode:function(e,t){return function(e){e(function(e){return{type:w,node:e}}(t))}},updateLink:function(e){return function(t){t(function(e){return{type:A,link:e}}(e))}},updateNode:function(e){return function(t){t(function(e){return{type:T,node:e}}(e))}}}),je=Object(c.b)((function(e){return{graphId:e.graph.data.id,linkIndex:e.graph.idToLink,nodeIndex:e.graph.idToNode}}),Se,null,{forwardRef:!0})(r.a.forwardRef((function(e,t){var a=e.graphId,n=e.linkIndex,o=e.nodeIndex,s=e.nodeOrLink,c=e.saveLink,i=e.saveNode,l=e.updateLink,u=e.updateNode;return r.a.createElement("div",{ref:t,className:"details"},"node"===s.type?r.a.createElement(Oe,{graphId:a,node:s,nodeIndex:o,saveNode:i,updateNode:u}):r.a.createElement(ke,{graphId:a,link:s,linkIndex:n,saveLink:c,updateLink:l}))}))),Ce=(a(142),function(e){Object(fe.a)(a,e);var t=Object(pe.a)(a);function a(){var e;Object(de.a)(this,a);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).graph=r.a.createRef(),e.contextMenu=r.a.createRef(),e.details=r.a.createRef(),e.selectionBox=r.a.createRef(),e.state={showContextMenu:!1,nodeClicks:0,shouldPreventZoom:!1,zoomAmount:0,currentTool:"Select",currentNodeOrLink:null,hoveredObject:null,isAddingLink:!1,hasClickBeenHandled:!0,mouseX:0,mouseY:0,ctx:null,selectedNodes:[],isSelecting:!1,selectionStartCoords:[0,0]},e.handleKeyPress=function(t){switch(t.keyCode){case 27:e.state.isAddingLink&&e.setState({isAddingLink:!1});break;case 46:var a=e.state.currentNodeOrLink;a?"node"===a.type?e.deleteNode(a):e.deleteLink(a):e.state.selectedNodes.length&&e.state.selectedNodes.forEach((function(t){return e.deleteNode(t)}))}},e.handlePencilClick=function(t){e.state.isAddingLink?e.setState({isAddingLink:!1}):e.addNode(t.clientX,t.clientY)},e.handleSelectionClick=function(t){if(e.state.isSelecting)e.selectNodesInArea(e.state.selectionStartCoords[0],e.state.selectionStartCoords[1],t.clientX,t.clientY);else{e.setState({selectionStartCoords:[t.clientX,t.clientY]});var a=e.selectionBox.current;a.style.left=t.clientX+"px",a.style.top=t.clientY+"px",a.style.width="0px",a.style.height="0px"}e.setState((function(e){return{isSelecting:!e.isSelecting}}))},e.onBackgroundClick=function(t){if(!e.state.hasClickBeenHandled){switch(e.state.currentTool){case"Select":e.state.currentNodeOrLink&&e.setState({currentNodeOrLink:null});break;case"Draw":e.handlePencilClick(t);break;case"Area select":e.handleSelectionClick(t)}e.setState({hasClickBeenHandled:!0})}},e.onClick=function(t){e.setState({hasClickBeenHandled:!1});var a=e.isContextMenuClick(t);e.state.showContextMenu&&!a&&(e.setState({hasClickBeenHandled:!0}),e.closeContextMenu())},e.onMouseMove=function(t){e.state.isSelecting&&e.drawSelectionBox(t.clientX,t.clientY);var a=e.graph.current.screen2GraphCoords(t.clientX,t.clientY),n=a.x,r=a.y;e.setState({mouseX:n,mouseY:r})},e.onHover=function(t){t!==e.state.hoveredObject&&e.setState({hoveredObject:t})},e.onRightClick=function(t){t.preventDefault();var a=t.clientY,n=t.clientX;e.setState({showContextMenu:!0},(function(){var t=e.contextMenu.current;t.offsetWidth,t.offsetHeight;t.style.left=n+"px",t.style.top=a+"px"}))},e.closeContextMenu=function(){e.setState({showContextMenu:!1})},e.createNodeFromMenu=function(){var t=e.contextMenu.current,a=parseInt(t.style.left),n=parseInt(t.style.top);e.addNode(a,n)},e.isContextMenuClick=function(t){if(!e.state.showContextMenu)return!1;var a=e.contextMenu.current.getBoundingClientRect();return!(t.clientX<a.left||t.clientX>a.right||t.clientY<a.top||t.clientY>a.bottom)},e.addNode=function(t,a){var n=e.graph.current.screen2GraphCoords(t,a),r=n.x,o=n.y,s={id:e.props.graph.data.nodeSequence,name:"",neighbours:new Set,groups:[],isGroup:!1,notes:"",style:{color:e.props.graph.data.settings.defaultNodeColor,size:e.props.graph.data.settings.defaultNodeSize},type:"node"};Object.assign(s,{fx:r,fy:o}),e.props.addNode(e.props.graph.data.id,s),e.setState({shouldPreventZoom:!0,currentNodeOrLink:s})},e.deleteNode=function(t){e.props.deleteNode(e.props.graph.data.id,t),e.setPostDeleteState(t)},e.handleNodePencilClick=function(t){e.state.isAddingLink?(e.props.graph.neighbours[t.id].has(e.state.currentNodeOrLink)||t===e.state.currentNodeOrLink||e.addLink(e.state.currentNodeOrLink.id,t.id),e.setState({isAddingLink:!1})):e.setState({currentNodeOrLink:t,isAddingLink:!0,mouseX:t.x,mouseY:t.y})},e.onNodeClick=function(t){console.log(e.props.graph.data),e.state.hasClickBeenHandled||("Select"===e.state.currentTool?(e.setState({currentNodeOrLink:t}),e.trackNodeDblClick(t)):"Erase"===e.state.currentTool?(e.deleteNode(t),e.setState({isAddingLink:!1})):"Draw"===e.state.currentTool&&e.handleNodePencilClick(t)),e.setState({selectedNodes:[],hasClickBeenHandled:!0})},e.onNodeDrag=function(t){e.state.selectedNodes.length,e.setState({currentNodeOrLink:t})},e.onNodeDragEnd=function(t){e.graph.current.d3ReheatSimulation(),t.fx=t.x,t.fy=t.y},e.selectNodesInArea=function(t,a,n,r){var o,s=e.graph.current.screen2GraphCoords(t,a),c=s.x,i=s.y,l=e.graph.current.screen2GraphCoords(n,r),u=l.x,d=l.y,m=Math.min(c,u),f=Math.max(c,u),p=Math.min(i,d),g=Math.max(i,d),h=[],b=Object(R.a)(e.props.graph.data.nodes);try{for(b.s();!(o=b.n()).done;){var E=o.value;m<=E.x&&E.x<=f&&p<=E.y&&E.y<=g&&h.push(E)}}catch(v){b.e(v)}finally{b.f()}e.setState({selectedNodes:h}),e.setState({currentNodeOrLink:1===h.length?h[0]:null})},e.trackNodeDblClick=function(t){e.setState((function(a){return a.nodeClicks>=1&&e.unstickNode(t),setTimeout((function(){e.setState({nodeClicks:0})}),200),Object(m.a)(Object(m.a)({},a),{},{nodeClicks:a.nodeClicks+1})}))},e.unstickNode=function(t){delete t.fx,delete t.fy,e.graph.current.d3ReheatSimulation()},e.addLink=function(t,a){var n={id:e.props.graph.data.linkSequence,source:e.props.graph.idToNode[t],target:e.props.graph.idToNode[a],style:{color:e.props.graph.data.settings.defaultLinkColor,width:e.props.graph.data.settings.defaultLinkWidth}};e.props.addLink(e.props.graph.data.id,n),e.setState({currentNodeOrLink:n})},e.deleteLink=function(t){e.props.deleteLink(e.props.graph.data.id,t),e.setPostDeleteState(t)},e.onLinkClick=function(t){e.state.hasClickBeenHandled||("Select"===e.state.currentTool?e.setState({currentNodeOrLink:t}):"Erase"===e.state.currentTool&&e.deleteLink(t)),e.setState({hasClickBeenHandled:!0})},e.drawCircle=function(e,t,a,n,r){e.beginPath(),e.arc(t,a,n,0,2*Math.PI,!1),e.fillStyle=r,e.fill()},e.drawLine=function(e,t,a,n,r,o,s){e.beginPath(),e.strokeStyle=t,e.lineWidth=a,e.moveTo(n,r),e.lineTo(o,s),e.stroke(),e.closePath()},e.drawLink=function(t,a){e.state.ctx||e.setState({ctx:a});var n=t.style||{},r=t.source,o=t.target;[e.state.hoveredObject,e.state.currentNodeOrLink].includes(t)&&e.drawLine(a,b,n.width+3,r.x,r.y,o.x,o.y),e.drawLine(a,n.color,n.width,r.x,r.y,o.x,o.y)},e.drawNode=function(t,a,n){e.state.ctx||e.setState({ctx:a});var r=t.style||{},o=t.label||t.name||"";a.font="".concat(12,"px Sans-Serif");a.measureText(o).width;a.textAlign="center",a.textBaseline="top",a.fillStyle=r.color,a.fillText(o,t.x,t.y+r.size+5);var s=e.state.hoveredObject;[s,e.state.currentNodeOrLink].concat(Object(M.a)(e.state.selectedNodes)).includes(t)?e.drawCircle(a,t.x,t.y,r.size+3,b):s&&("isGroup"in s&&e.props.graph.neighbours[s.id].has(t)||"source"in s&&[s.source,s.target].includes(t))&&e.drawCircle(a,t.x,t.y,r.size+3,E),t===e.state.currentNodeOrLink&&e.state.isAddingLink&&e.drawTempLink(a,t.x,t.y),r.icon||e.drawCircle(a,t.x,t.y,r.size,r.color)},e.drawSelectionBox=function(t,a){var n=e.selectionBox.current,r=Object(G.a)(e.state.selectionStartCoords,2),o=r[0],s=r[1],c=Math.min(o,t),i=Math.min(s,a),l=Math.max(o,t),u=Math.max(s,a);n.style.left=c+"px",n.style.top=i+"px",n.style.width=l-c+"px",n.style.height=u-i+"px"},e.drawTempLink=function(t,a,n){e.drawLine(t,"black",1,a,n,e.state.mouseX,e.state.mouseY)},e.selectTool=function(t){e.setState({currentTool:t})},e.setPostDeleteState=function(t){e.setState((function(e){var a=e.currentNodeOrLink;return{currentNodeOrLink:a===t?null:a,hoveredObject:null,shouldPreventZoom:!0}}))},e}return Object(me.a)(a,[{key:"componentDidMount",value:function(){var e=this.graph.current;e.d3Force("center",(function(){return null})),e.d3Force("collide",Object(ge.a)()),this.setState({zoomAmount:e.zoom()}),document.onkeyup=this.handleKeyPress}},{key:"render",value:function(){var e=this,t={ref:this.contextMenu,closeContextMenu:this.closeContextMenu},a={ref:this.details,nodeOrLink:Object(m.a)({},this.state.currentNodeOrLink)},n={graphData:this.props.graph.data,nodeAutoColorBy:"group",onBackgroundClick:this.onBackgroundClick,onNodeDrag:this.onNodeDrag,onNodeDragEnd:this.onNodeDragEnd,onNodeClick:this.onNodeClick,onNodeHover:this.onHover,nodeCanvasObject:this.drawNode,nodeCanvasObjectMode:function(){return"replace"},onLinkClick:this.onLinkClick,onLinkHover:this.onHover,linkCanvasObject:this.drawLink,d3VelocityDecay:.1,d3AlphaDecay:.1,onZoom:function(){e.state.shouldPreventZoom&&e.setState({shouldPreventZoom:!1},(function(){var t;return null===(t=e.graph.current)||void 0===t?void 0:t.zoom(e.state.zoomAmount)}))},onZoomEnd:function(t){var a=t.k;e.setState({zoomAmount:a})}};return r.a.createElement("main",{id:"dashboard",onClick:this.onClick},this.props.auth.user&&0===this.props.auth.user.id&&r.a.createElement("div",{className:"demo-message"},"DEMO (some features may not work)"),r.a.createElement("div",{ref:this.selectionBox,className:"selection-box",style:{display:this.state.isSelecting?"block":"none"}}),this.state.showContextMenu&&r.a.createElement(ne,t),this.state.currentNodeOrLink&&r.a.createElement(je,a),r.a.createElement(ve,{selectTool:this.selectTool}),r.a.createElement("section",{className:"graph",onContextMenu:this.onRightClick,onMouseMove:this.state.isAddingLink||this.state.isSelecting?this.onMouseMove:void 0},r.a.createElement(he.a,Object.assign({ref:this.graph},n))))}}]),a}(r.a.Component)),ye={addLink:function(e,t){return function(e){e(function(e){return{type:v,link:e}}(t))}},addNode:function(e,t){return function(e){e(function(e){return{type:N,node:e}}(t))}},deleteLink:function(e,t){return function(e){e(function(e){return{type:O,link:e}}(t))}},deleteNode:function(e,t){return function(e){e(function(e){return{type:k,node:e}}(t))}}},we=Object(c.b)((function(e){return{auth:e.auth,graph:e.graph}}),ye)(Ce),Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(n.useState)(e),a=Object(G.a)(t,2),r=a[0],o=a[1];return{value:r,setValue:o,clear:function(){return o("")},bindProps:{value:r,onChange:function(e){o(e.target.value)}}}},xe=function(e){var t=e.width,a=e.height,o=Object(n.useRef)(),s=Object(n.useState)({nodes:[],links:[]}),c=Object(G.a)(s,2),i=c[0],l=c[1],u=function(e,t){var a=Object(M.a)(e),n=Object(M.a)(t),r=a.length?a[a.length-1].id+1:0,o=d(),s=o.x,c=o.y;if(Math.random()>.3?a.push({id:r,fx:s,fy:c}):a.push({id:r,x:s,y:c}),a.length>10){var i=a[0];a.shift(),n=n.filter((function(e){return e.source!==i&&e.target!==i}))}for(var l=0;l<4;l++){var u=a[Math.round(Math.random()*a.length-1)];u&&u.id!==r&&n.push({source:r,target:u.id})}return{nodes:a,links:n}},d=function(){return o.current.screen2GraphCoords(Math.round(Math.random()*t),Math.round(Math.random()*a))};return Object(n.useEffect)((function(){!function(){for(var e={nodes:[],links:[]},t=0;t<10;t++)Object.assign(e,u(e.nodes,e.links));l(e)}();var e=setInterval((function(){l((function(e){var t=e.nodes,a=e.links;return u(t,a)}))}),1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{id:"home-bg"},r.a.createElement(he.a,{ref:o,graphData:i,d3VelocityDecay:1,d3AlphaDecay:1,linkWidth:2,nodeRelSize:5}))},De={signup:function(e){return function(t){q.signup(e).then((function(){window.location.href="/login"})).catch(console.log)}}},Pe=Object(c.b)((function(e){return{authErrors:e.auth.errors}}),De)((function(e){var t=e.authErrors,a=e.signup,o=Le(""),s=o.value,c=o.bindProps,l=Le(""),u=l.value,d=l.bindProps,f=Le(""),p=f.value,g=f.bindProps,h=Le(""),b=h.value,E=h.bindProps,v=Object(n.useState)({}),N=Object(G.a)(v,2),O=N[0],k=N[1],S=Object(n.useState)(!1),j=Object(G.a)(S,2),C=j[0],y=j[1];return Object(n.useEffect)((function(){C&&k((function(e){var a=Object(m.a)(Object(m.a)({},e),t);return s?delete a.name:a.name="Please enter a name",u?delete a.email:a.email="Please enter an email",p?delete a.password:a.password="Please enter a password",p!==b?a.password2="Passwords do not match":delete a.password2,a}))}),[C,s,u,p,b,t]),r.a.createElement("main",{id:"signup",className:"auth-page main-container"},r.a.createElement(xe,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("div",{className:"auth-form-container"},r.a.createElement("h1",null,"Sign in"),r.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),y(!0),0===Object.keys(O).length)&&a({name:s,email:u,password:p})},noValidate:!0},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-email"},"Name"),r.a.createElement("input",Object.assign({className:O.name?"form-input-error":"form-input",type:"text",id:"signup-name",name:"name",placeholder:"Name",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0,required:!0},c)),r.a.createElement("div",{className:"form-input-error-text"},O.name)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-email"},"Email"),r.a.createElement("input",Object.assign({className:O.email?"form-input-error":"form-input",type:"text",id:"signup-email",name:"email",placeholder:"Email",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",required:!0},d)),r.a.createElement("div",{className:"form-input-error-text"},O.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-password"},"Password"),r.a.createElement("input",Object.assign({className:O.password?"form-input-error":"form-input",type:"password",id:"signup-password",name:"password",placeholder:"Password",autoComplete:"off",required:!0},g)),r.a.createElement("div",{className:"form-input-error-text"},O.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-password2"},"Confirm password"),r.a.createElement("input",Object.assign({className:O.password2?"form-input-error":"form-input",type:"password",id:"signup-password2",name:"password2",placeholder:"Confirm password",autoComplete:"off",required:!0},E)),r.a.createElement("div",{className:"form-input-error-text"},O.password2)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"form-submit",type:"submit",disabled:!0,title:"Not available in client demo"},"SIGN UP")))),r.a.createElement("div",{className:"auth-form-container"},"Already have an account? ",r.a.createElement(i.b,{to:"/login",className:"form-link"},"Login")))})),Ae=(a(143),{login:function(e,t){return function(a){q.login(e,t).then((function(e){q.setAuthToken(e.data.token),a(X(e.data.user)),window.location.href="/"})).catch(console.log)}}}),Te=Object(c.b)((function(e){return{auth:e.auth}}),Ae)((function(e){var t=e.login,a=Le(""),o=a.value,s=a.bindProps,c=Le(""),l=c.value,u=c.bindProps,d=Object(n.useState)({}),f=Object(G.a)(d,2),p=f[0],g=f[1],h=Object(n.useState)(!1),b=Object(G.a)(h,2),E=b[0],v=b[1];return Object(n.useEffect)((function(){E&&g((function(e){var t=Object(m.a)({},e);return o?delete t.email:t.email="Please enter an email",l?delete t.password:t.password="Please enter a password",t}))}),[E,o,l]),r.a.createElement("main",{id:"login",className:"auth-page main-container"},r.a.createElement(xe,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("div",{className:"auth-form-container"},r.a.createElement("h1",null,"Login to continue"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v(!0),0===Object.keys(p).length&&t(o,l)},noValidate:!0},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"login-email"},"Email"),r.a.createElement("input",Object.assign({className:p.email?"form-input-error":"form-input",type:"text",id:"login-email",name:"email",placeholder:"Email",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0},s)),r.a.createElement("div",{className:"form-input-error-text"},p.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"login-password"},"Password"),r.a.createElement("input",Object.assign({className:p.password?"form-input-error":"form-input",type:"password",id:"login-password",name:"password",placeholder:"Password",autoComplete:"off",required:!0},u)),r.a.createElement("div",{className:"form-input-error-text"},p.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"form-submit",type:"submit",disabled:!0,title:"Not available in client demo"},"LOGIN")))),r.a.createElement("div",{className:"auth-form-container"},"Don't have an account? ",r.a.createElement(i.b,{to:"/signup",className:"form-link"},"Sign up")))})),Ie=(a(144),{loadTestGraph:K,loginSuccess:X}),Ue=Object(c.b)(null,Ie)((function(e){var t=e.loadTestGraph,a=e.loginSuccess,o=Object(n.useState)(!1),s=Object(G.a)(o,2),c=s[0],l=s[1];return r.a.createElement("main",{id:"home",className:"main-container"},r.a.createElement(xe,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("h1",{className:"main-title"},r.a.createElement("span",{className:"thin"},"Welcome to"),"\u2002",!c&&"MAPSOC",r.a.createElement("img",{className:"logo",src:"/logo-big-home.png",alt:"Logo",style:c?{marginLeft:"2px"}:{width:0},onLoad:function(){return l(!0)}})),r.a.createElement("div",{className:"auth-links"},r.a.createElement(i.b,{to:"/login",style:{backgroundColor:"rgba(137, 188, 219, 0.3)"}},"Login"),r.a.createElement(i.b,{to:"/signup"},"Sign up")),r.a.createElement("div",{className:"demo-wrapper"},"Or check out the ",r.a.createElement("button",{className:"demo-btn",onClick:function(){a({id:0,name:"Test User",email:"test@mapsoc.com"}),t()}},"DEMO")))})),Re=(a(145),function(e){var t=e.errors,a=e.resetUserErrors,o=e.updateUser,s=e.user,c=Le(s.name),i=c.value,l=c.bindProps,u=Le(s.email),d=u.value,m=u.bindProps,f=Object(n.useState)(!1),p=Object(G.a)(f,2),g=p[0],h=p[1];return Object(n.useEffect)((function(){h(!!i&&!!d&&(i!==s.name||d!==s.email))}),[i,d]),Object(n.useEffect)((function(){return function(){return a()}}),[]),r.a.createElement("section",{className:"profile"},r.a.createElement("h1",null,"Edit Profile"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===Object.keys(t).length&&o(s.id,{name:i,email:d})},noValidate:!0},r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"name"},"Name"),r.a.createElement("input",Object.assign({type:"text",id:"name",className:"form-input"},l))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"email"},"Email"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"email",id:"email",className:"form-input"},m)),r.a.createElement("div",{className:"form-input-error-text"},t.email))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!g},"Update"))))}),Fe=function(e){var t=e.errors,a=e.resetUserErrors,o=e.user,s=e.updateUser,c=Le(""),i=c.value,l=c.bindProps,u=Le(""),d=u.value,m=u.bindProps,f=Le(""),p=f.value,g=f.bindProps,h=Object(n.useState)(!1),b=Object(G.a)(h,2),E=b[0],v=b[1];return Object(n.useEffect)((function(){v(!!i&&!!d&&!!p&&d===p)}),[i,d,p]),Object(n.useEffect)((function(){return function(){return a()}}),[]),r.a.createElement("section",{className:"security"},r.a.createElement("h1",null,"Security"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===Object.keys(t).length&&s(o.id,{currPassword:i,newPassword:d})},noValidate:!0},r.a.createElement("h2",null,"Change Password"),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"currPassword"},"Current"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"password",id:"currPassword",className:"form-input"},l)),r.a.createElement("div",{className:"form-input-error-text"},t.currPassword))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"newPassword"},"New"),r.a.createElement("input",Object.assign({type:"password",id:"newPassword",className:"form-input"},m))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"newPassword2"},"Re-type new"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"password",id:"newPassword2",className:"form-input"},g)),r.a.createElement("div",{className:"form-input-error-text"},d!==p?"Passwords do not match":""))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!E},"Update"))))},Ge=(a(146),function(e){var t=e.graph,a=e.updateGraphSettings,o=Object(n.useState)(t.settings.defaultNodeColor),s=Object(G.a)(o,2),c=s[0],i=s[1],l=Object(n.useState)(t.settings.defaultNodeSize.toString()),u=Object(G.a)(l,2),d=u[0],m=u[1],f=Object(n.useState)(t.settings.defaultLinkColor),p=Object(G.a)(f,2),g=p[0],h=p[1],b=Object(n.useState)(t.settings.defaultLinkWidth.toString()),E=Object(G.a)(b,2),v=E[0],N=E[1],O=Object(n.useState)([0,0]),k=Object(G.a)(O,2),S=k[0],j=k[1],C=Object(n.useRef)(null),y=Object(n.useRef)(null);return Object(n.useEffect)((function(){if(C.current){var e=C.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t.scale(2.2,2.2);var a=e.width/4.4,n=e.height/4.4;t.beginPath(),t.arc(a,n,parseInt(d),0,2*Math.PI,!1),t.fillStyle=c,t.fill()}}),[c,d,C,S]),Object(n.useEffect)((function(){if(y.current){var e=y.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t.scale(2.2,2.2),t.beginPath(),t.strokeStyle=g,t.lineWidth=parseInt(v),t.moveTo(10,e.height/2.2-10),t.lineTo(e.width/2.2-10,10),t.stroke(),t.closePath()}}),[g,v,y,S]),Object(n.useLayoutEffect)((function(){var e=function(){j([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),r.a.createElement("section",{className:"settings"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n={defaultNodeColor:c,defaultNodeSize:parseInt(d),defaultLinkColor:g,defaultLinkWidth:parseInt(v)};a(t.id,n)},noValidate:!0},r.a.createElement("h1",null,"Settings"),r.a.createElement("section",{id:"node-settings"},r.a.createElement("h2",null,"Nodes"),r.a.createElement("div",{className:"form-col-wrapper"},r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement("canvas",{ref:C,id:"node-icon-cvs",style:{width:"100%",height:"100%"}})),r.a.createElement("div",{className:"node-settings-controls"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},"Default node color"),r.a.createElement(Q,{value:c,onColorChange:function(e){return i(e)},width:"100%",height:"30px"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},r.a.createElement("span",null,"Default node size"),r.a.createElement("span",null,d)),r.a.createElement(ae,{color:c,id:"defaultNodeSize",label:"Default node size",min:1,max:10,onChange:function(e){return m(e.currentTarget.value.toString())},value:d}))))),r.a.createElement("section",{id:"link-settings"},r.a.createElement("h2",null,"Links"),r.a.createElement("div",{className:"form-col-wrapper"},r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement("canvas",{ref:y,id:"link-icon-cvs",style:{width:"100%",height:"100%"}})),r.a.createElement("div",{className:"link-settings-controls"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},"Default link color"),r.a.createElement(Q,{value:g,onColorChange:function(e){return h(e)},width:"100%",height:"30px"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},r.a.createElement("span",null,"Default link width"),r.a.createElement("span",null,v)),r.a.createElement(ae,{color:g,id:"defaultLinkWidth",label:"Default link width",min:1,max:10,onChange:function(e){return N(e.currentTarget.value.toString())},value:v})))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!function(){var e=t.settings;return c!==e.defaultNodeColor||parseInt(d)!==e.defaultNodeSize||g!==e.defaultLinkColor||parseInt(v)!==e.defaultLinkWidth}()},"Update")))))}),Me=(a(147),{loadTestGraph:K,logout:function(){return function(e){e({type:I.LOGOUT}),q.logout(),window.location.href="/"}}}),_e=Object(c.b)((function(e){return{auth:e.auth}}),Me)((function(e){var t=e.auth,a=e.children,o=(e.loadTestGraph,e.logout),s=Object(n.useState)(!1),c=Object(G.a)(s,2),i=c[0],u=c[1],d=Object(l.g)(),m=function(){u(!i)};return r.a.createElement("div",{id:"app"},"/"!==d.pathname&&r.a.createElement(ue,{isLoggedIn:t.isLoggedIn,logout:o,toggleModal:m}),i&&r.a.createElement(oe,null,r.a.createElement(le,{toggleModal:m})),r.a.createElement(l.d,null,r.a.Children.map(a,(function(e){return r.a.cloneElement(e,{isLoggedIn:t.isLoggedIn})}))))}));a(148);window.console||(window.console={});for(var Be=0,ze=["debug","warn","info"];Be<ze.length;Be++){console[ze[Be]]=function(){}}Object(o.render)(r.a.createElement(c.a,{store:z},r.a.createElement(i.a,null,r.a.createElement(_e,null,r.a.createElement(ee,{exact:!0,path:"/",component:Ue}),r.a.createElement(ee,{path:"/login",component:Te}),r.a.createElement(ee,{path:"/signup",component:Pe}),r.a.createElement(te,{path:"/dashboard",component:we}),r.a.createElement(l.a,{to:"/"})))),document.getElementById("app"))},98:function(e,t,a){e.exports=a(149)}},[[98,1,2]]]);
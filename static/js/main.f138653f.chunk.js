(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{123:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(26),i=n.n(o),s=n(7),c=n(9),l=n(21),u=n(24),d=n(76),m=n(2),f="#A9A9A9",p=2,g="#408ab8",h=5,b="rgba(255, 188, 71, 0.7)",E="rgba(255, 188, 71, 0.3)",v="/api/graphs/",N="ADD_LINK",k="ADD_NODE",O="DELETE_LINK",y="DELETE_NODE",S="GET_GRAPH_BEGIN",C="GET_GRAPH_FAILURE",j="GET_GRAPH_SUCCESS",w="SAVE_LINK_SUCCESS",L="SAVE_NODE_SUCCESS",x="UPDATE_GRAPH_BEGIN",A="UPDATE_GRAPH_FAILURE",D="UPDATE_GRAPH_SUCCESS",P="UPDATE_GRAPH_SETTINGS_SUCCESS",F="UPDATE_LINK",G="UPDATE_NODE",T={LOGIN_FAILURE:"LOGIN_FAILURE",LOGIN_SUCCESS:"LOGIN_SUCCESS",LOGOUT:"LOGOUT",RESET_USER_ERRORS:"RESET_USER_ERRORS",UPDATE_USER_FAILURE:"UPDATE_USER_FAILURE",UPDATE_USER_SUCCESS:"UPDATE_USER_SUCCESS",LOGIN_ENDPOINT:"/api/users/login",SIGNUP_ENDPOINT:"/api/users/signup",USERS_ENDPOINT:"/api/users/"},I={errors:{},isLoggedIn:!1,user:{}},U=n(12),B=n(14),R=n(3),M=n(20),_={data:{nodes:[],links:[],linkSequence:0,nodeSequence:0,settings:{defaultLinkColor:f,defaultLinkWidth:p,defaultNodeColor:g,defaultNodeSize:h}},idToLink:{},idToNode:{},isLoading:!1,isUpdating:!1,neighbours:{}},z=Object(u.c)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T.LOGIN_FAILURE:return Object(m.a)(Object(m.a)({},e),{},{errors:t.errors});case T.LOGIN_SUCCESS:return Object(m.a)(Object(m.a)({},e),{},{errors:{},isLoggedIn:!0,user:t.user});case T.LOGOUT:return{errors:{},isLoggedIn:!1,user:{}};case T.RESET_USER_ERRORS:return Object(m.a)(Object(m.a)({},e),{},{errors:{}});case T.UPDATE_USER_FAILURE:return Object(m.a)(Object(m.a)({},e),{},{errors:t.errors});case T.UPDATE_USER_SUCCESS:return Object(m.a)(Object(m.a)({},e),{},{errors:{},user:t.user});default:return e}},graph:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)({},e.data)});switch(t.type){case N:n.data=Object(m.a)(Object(m.a)({},e.data),{},{links:[].concat(Object(M.a)(e.data.links),[t.link])});var a=n.data.nodes.filter((function(e){return e===t.link.source||e===t.link.target})),r=Object(R.a)(a,2),o=r[0],i=r[1];if(n.neighbours[o.id].add(i),n.neighbours[i.id].add(o),o.isGroup&&i.isGroup){var s=o===t.link.target?o:i;s.groups.push(o===t.link.source?o.id:i.id)}else o.isGroup?i.groups.push(o.id):i.isGroup&&o.groups.push(i.id);return n.idToLink[t.link.id]=t.link,n.data.linkSequence++,n;case k:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),{},{nodes:[].concat(Object(M.a)(e.data.nodes),[t.node]),nodeSequence:e.data.nodeSequence+1}),idToNode:Object(m.a)(Object(m.a)({},e.idToNode),{},Object(B.a)({},t.node.id,t.node)),neighbours:Object(m.a)(Object(m.a)({},e.neighbours),{},Object(B.a)({},t.node.id,new Set))});case O:var c=t.link,l=c.source,u=c.target;return n.data.links=e.data.links.filter((function(e){return e!==c})),l.groups=l.groups.filter((function(e){return e!==u.id})),u.groups=u.groups.filter((function(e){return e!==l.id})),n.neighbours[u.id].delete(l),n.neighbours[l.id].delete(u),n;case y:var d=t.node;n.data.nodes=e.data.nodes.filter((function(e){return e!==d}));var f=e.neighbours[d.id];return f.forEach((function(e){n.neighbours[e.id].delete(d),e.groups=e.groups.filter((function(e){return e!==d.id}))})),n.data.links=e.data.links.filter((function(e){return e.source!==d&&e.target!==d})),delete n.idToNode[d.id],n;case S:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!0});case C:return Object(m.a)(Object(m.a)({},e),{},{isLoading:!1});case j:n.data=Object(m.a)({},t.graph);var p,g=Object(U.a)(n.data.nodes);try{for(g.s();!(p=g.n()).done;){var h=p.value;n.idToNode[h.id]=h,n.neighbours[h.id]=new Set}}catch(T){g.e(T)}finally{g.f()}var b,E=Object(U.a)(n.data.links);try{for(E.s();!(b=E.n()).done;){var v=b.value;n.idToLink[v.id]=v,n.neighbours[v.source].add(n.idToNode[v.target]),n.neighbours[v.target].add(n.idToNode[v.source])}}catch(T){E.e(T)}finally{E.f()}return Object(m.a)(Object(m.a)({},n),{},{isLoading:!0});case x:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!0});case A:return Object(m.a)(Object(m.a)({},e),{},{isUpdating:!1});case P:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),{},{settings:t.values})});case D:return Object(m.a)(Object(m.a)({},e),{},{data:Object(m.a)(Object(m.a)({},e.data),t.values),isUpdating:!1});case F:var w=n.data.links.find((function(e){return e.source===t.link.source&&e.target===t.link.target}));return Object.assign(w,t.link),n;case G:var L=n.idToNode[t.node.id];return L.isGroup!==t.node.isGroup&&n.neighbours[L.id].forEach((function(e){t.node.isGroup&&!e.isGroup?e.groups.push(t.node.id):e.groups=e.groups.filter((function(e){return e!==t.node.id}))})),Object.assign(L,t.node),n;default:return e}}}),H=Object(u.d)(z,Object(u.a)(d.a)),W=n(6),q=n.n(W),X={setAuthToken:function(e){localStorage.token=e,q.a.defaults.headers.common.Authorization=e},get:function(e){return q.a.get(T.USERS_ENDPOINT+e)},update:function(e,t){return q.a.put(T.USERS_ENDPOINT+e,t)},login:function(e,t){return q.a.post(T.LOGIN_ENDPOINT,{username:e,password:t})},logout:function(){localStorage.removeItem("token"),delete q.a.defaults.headers.common.Authorization},signup:function(e){return q.a.post(T.SIGNUP_ENDPOINT,e)}};var Y={addNode:function(e,t){return q.a.post(V(e),t)},deleteNode:function(e,t){return q.a.delete(V(e)+t.id)},updateNode:function(e,t){return q.a.put(V(e)+t.id,t)},addLink:function(e,t){return q.a.post(Z(e),t)},deleteLink:function(e,t){return q.a.delete(Z(e)+t.id)},updateLink:function(e,t){return q.a.put(Z(e),t)},deleteGraph:function(e){return q.a.delete(v+e)},getGraph:function(e){return q.a.get(v+e)},updateGraph:function(e){return q.a.put(v+e.id,e)},updateGraphSettings:function(e,t){return q.a.put(v+e+"/settings/",t)}},V=function(e){return v+e+"/nodes/"};var Z=function(e){return v+e+"/links/"};var K,J=function(e){return{type:T.LOGIN_SUCCESS,user:e}},$={id:1011,links:[{id:1,notes:"Met in 1st year res",source:0,color:"#29B6F6",width:2,target:3,type:"link"},{id:2,notes:"Met in 1st year res",source:0,color:"#29B6F6",width:2,target:4,type:"link"},{id:3,notes:"Played varsity football together",source:3,color:"#C492AC",width:2,target:4,type:"link"},{id:7,notes:"",source:1,color:"#02D7C5",width:2,target:8,type:"link"},{id:8,notes:"",source:6,color:"#29B6F6",width:2,target:0,type:"link"},{id:9,notes:"Met in 1st year English",source:0,color:"#29B6F6",width:2,target:7,type:"link"},{id:10,notes:"",source:10,color:"#33B579",width:2,target:7,type:"link"},{id:11,notes:"",source:10,color:"#33B579",width:2,target:11,type:"link"},{id:12,notes:"",source:10,color:"#33B579",width:2,target:12,type:"link"},{id:13,notes:"Met in 2nd year res",source:13,color:"#F35C4E",width:2,target:7,type:"link"},{id:14,notes:"",source:15,color:"#584A8F",width:2,target:17,type:"link"},{id:15,notes:"",source:1,color:"#02D7C5",width:2,target:9,type:"link"},{id:16,notes:"",source:1,color:"#02D7C5",width:2,target:14,type:"link"},{id:17,notes:"",source:16,color:"#A9A9A9",width:2,target:18,type:"link"},{id:18,notes:"",source:6,color:"#29B6F6",width:2,target:19,type:"link"},{id:19,notes:"",source:16,color:"#A9A9A9",width:2,target:20,type:"link"},{id:20,notes:"",source:16,color:"#A9A9A9",width:2,target:23,type:"link"},{id:22,notes:"",source:19,color:"#29B6F6",width:2,target:24,type:"link"},{id:23,notes:"",source:15,color:"#584A8F",width:2,target:26,type:"link"},{id:24,notes:"",source:15,color:"#584A8F",width:2,target:28,type:"link"},{id:25,notes:"",source:15,color:"#584A8F",width:2,target:27,type:"link"},{id:26,notes:"",source:12,color:"#33B579",width:2,target:30,type:"link"},{id:27,notes:"",source:19,color:"#29B6F6",width:2,target:26,type:"link"}],nodes:[(K={id:0,val:10,name:"University",type:"node",color:"#29B6F6"},Object(B.a)(K,"val",8),Object(B.a)(K,"fx",7.72),Object(B.a)(K,"fy",-36.8),Object(B.a)(K,"groups",[6]),Object(B.a)(K,"notes",""),Object(B.a)(K,"isGroup",!0),K),{id:1,name:"Work",type:"node",color:"#4cc8b3",val:8,fx:-237,fy:30,groups:[],notes:"",isGroup:!0},{fx:-31.086248579329524,fy:-85.86072254314755,groups:[],id:6,isGroup:!0,name:"School",notes:"",color:"#29B6F6",val:10,type:"node"},{id:3,name:"Roy",type:"node",groups:[0],color:"#408ab8",val:5,fx:28.5,fy:-89,notes:"Birthday: April 4\n\nMajor: Zoology\n\nLoves otters more than people",isGroup:!1},{id:4,name:"Frank",type:"node",groups:[0],color:g,val:h,notes:"Birthday: Jan 2\n\nMajor: Biology\n\nSoundcloud rapper",isGroup:!1},{fx:35.389488264503214,fy:18.68936922237114,groups:[0,10],id:7,isGroup:!1,name:"Ava",notes:"Birthday: Aug 14\n\nMajor: Theoretical physics\n\nOccupaton: TikToker",color:"#FE9998",val:5,type:"node"},{fx:-192.65914613593029,fy:69.07720050505536,groups:[1],id:8,isGroup:!1,name:"Harold",notes:"Believes the Earth is flat.",color:"#408ab8",val:5,type:"node"},{fx:-265.1785406836182,fy:80.52536467592789,groups:[1],id:9,isGroup:!1,name:"Vera",notes:"Vegetarian",color:"#FE9998",val:5,type:"node"},{fx:49.454427540662984,fy:58.64827694638886,groups:[],id:10,isGroup:!0,name:"Johnson Family",notes:"Originally from England",color:"#33B579",val:8,type:"node"},{fx:85.49694351821532,fy:90.09830455065064,groups:[10],id:11,isGroup:!1,name:"Carol",notes:"Ava's mom\n\nUltra marathoner, yoga teacher, vegan",color:"#FE9998",val:5,type:"node"},{fx:23.633214897791433,fy:99.95405432857024,groups:[10],id:12,isGroup:!1,name:"Stan",notes:"Ava's dad\n\nWorks in finance\n\nIs distantly related to Mariah Carey",color:"#408ab8",val:5,type:"node"},{fx:66.44734433456978,fy:8.51775277890066,groups:[],id:13,isGroup:!1,name:"Matt",notes:"Ava's boyfriend\n\nLost his front tooth after being jumped by a gang of 10-year olds. He was 25.",color:"#408ab8",val:5,type:"node"},{fx:-285.16726491027816,fy:4.68476402839536,groups:["1"],id:14,isGroup:!1,name:"Gord",notes:"Birthday: May 5\n\nLoves craft beer and tacos",color:"#408ab8",val:5,type:"node"},{fx:-216.05457376864402,fy:-118.29384078064074,groups:[],id:15,isGroup:!0,name:"Book club",notes:"",color:"#584A8F",val:10,type:"node"},{fx:-111.91854912013261,fy:118.01478343646012,groups:[],id:16,isGroup:!0,name:"Gym",notes:"",color:"#727A8C",val:10,type:"node"},{groups:[15],id:17,isGroup:!1,name:"Dave",notes:"Still believes in Santa Claus",color:"#408ab8",val:5,type:"node"},{fx:-166.49367431824479,fy:163.40953799955116,groups:[16],id:18,isGroup:!1,name:"Janelle",notes:"At the gym 24/7",color:"#FE9998",val:5,type:"node"},{fx:-54.9253091692777,fy:-149.49543392885118,groups:[6],id:19,isGroup:!0,name:"Highschool",notes:"",color:"#29B6F6",val:5,type:"node"},{fx:-101.65583035252143,fy:183.7616435456369,groups:[16],id:20,isGroup:!1,name:"Ben",notes:"The guy who can't stop talking about CrossFit",color:"#408ab8",val:5,type:"node"},{groups:[16],id:23,isGroup:!1,name:"Gary",notes:"Parkour",color:"#408ab8",val:5,type:"node"},{fx:-97.21417718469053,fy:-187.05340008831627,groups:[19],id:24,isGroup:!1,name:"Dory",notes:"Super forgetful\n\nOwes me $5",color:"#FE9998",val:5,type:"node"},{groups:[15,19],id:26,isGroup:!1,name:"Annabel",notes:"Birthday: July 16\n\nHas the best dad jokes",color:"#FE9998",val:5,type:"node"},{groups:[15],id:27,isGroup:!1,name:"Leanne",notes:"Has a Schnauzer named Dumbledore",color:"#FE9998",val:5,type:"node"},{groups:[15],id:28,isGroup:!1,name:"Anthony",notes:"Looks like Steve Carell\n\nHates Steve Carell",color:"#408ab8",val:5,type:"node"},{fx:-14.55123581410429,fy:136.1284102875155,groups:[],id:30,isGroup:!1,name:"Mariah Carey",notes:"",color:"#FE9998",val:5,type:"node"}],linkSequence:28,nodeSequence:31,settings:{defaultLinkColor:f,defaultLinkWidth:p,defaultNodeColor:g,defaultNodeSize:h}},Q=function(e){return{type:j,graph:e}},ee=function(){return function(e){e(Q($))}},te=(n(123),[["#D4DAE4","#B0B8CD","#949DB1","#727A8C","#5E6677","#3F4757","#1D2534"],["#FFCDD2","#FE9998","#F35C4E","#E94633","#D73C2D","#CA3626","#BB2B1A"],["#F9E6AD","#F4D679","#EDB90F","#EAA100","#EA8F00","#EA7E00","#EA5D00"],["#BCE4CE","#90D2AF","#33B579","#36955F","#247346","#1D5B38","#17492D"],["#BDF0E9","#92E7DC","#02D7C5","#11B3A5","#018B80","#026B60","#024F43"],["#B3E5FC","#81D4FA","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B"],["#AEC1FF","#88A3F9","#5874CD","#2349AE","#163FA2","#083596","#002381"],["#C5C0DA","#9F97C1","#7E6BAD","#584A8F","#4F4083","#473776","#3A265F"],["#D6BDCC","#C492AC","#A9537C","#963A64","#81355A","#6E3051","#4C2640"],["#D2C5C1","#B4A09A","#826358","#624339","#5D4037","#4E342E","#3E2723"]]),ne=["#FFFFFF","#F2F2F2","#E6E6E6","#CCCCCC","#B3B3B3","#999999","#808080","#666666","#4C4C4C","#000000"],ae=function(e){var t=e.value,n=e.onColorChange,o=e.width,i=e.height,s=Object(a.useState)(t),c=Object(R.a)(s,2),l=c[0],u=c[1],d=Object(a.useState)(!1),m=Object(R.a)(d,2),f=m[0],p=m[1],g=Object(a.useRef)(null),h=function(e){return e.map((function(e){return r.a.createElement("div",{className:l===e?"color-picker-palette-cell color-picker-palette-cell-selected":"color-picker-palette-cell",style:{background:e},onClick:function(){return function(e){n(e),p(!1)}(e)},key:e})}))},b=Object(a.useCallback)((function(e){e.target.className.includes("color-picker-")||p(!1)}),[]);return Object(a.useEffect)((function(){f?document.addEventListener("click",b):document.removeEventListener("click",b)}),[f,b]),Object(a.useEffect)((function(){return function(){return document.removeEventListener("click",b)}}),[b]),Object(a.useEffect)((function(){u(t)}),[t]),r.a.createElement("div",{className:"color-picker",style:{width:o||"100%",height:i||"100%"}},r.a.createElement("div",{className:"color-picker-selector",onClick:function(){p(!f)}},r.a.createElement("div",{className:"color-picker-selector-current",style:{background:l}})),f&&r.a.createElement("div",{ref:g,className:"color-picker-palette"},r.a.createElement("div",{className:"color-picker-default-palette"},te.map((function(e){return r.a.createElement("div",{key:e[0],className:"color-picker-palette-col"},h(e))})),r.a.createElement("div",{className:"color-picker-palette-row"},h(ne)))))},re=n(45),oe=function(e){var t=e.component,n=e.isLoggedIn,a=Object(re.a)(e,["component","isLoggedIn"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(l.a,{to:"/dashboard"}):r.a.createElement(t,e)}}))},ie=function(e){var t=e.component,n=e.isLoggedIn,a=Object(re.a)(e,["component","isLoggedIn"]);return r.a.createElement(l.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))},se=(n(125),function(e){var t=e.color,n=void 0===t?"white":t,o=e.id,i=e.label,s=e.max,c=e.min,l=e.onChange,u=e.onMouseUp,d=void 0===u?function(){}:u,m=e.value,f=Object(a.useRef)(null),p=Object(a.useState)(0),g=Object(R.a)(p,2),h=g[0],b=g[1];return Object(a.useEffect)((function(){var e=(f.current.getBoundingClientRect().width-15)/(s-c),t=e*parseInt(m)-e+2.5;b(t)}),[m]),r.a.createElement("div",{className:"range-slider"},r.a.createElement("div",{className:"custom-slider-wrapper"},r.a.createElement("div",{className:"custom-slider-range"}),r.a.createElement("div",{className:"custom-slider-knob",style:{background:n,left:h,opacity:f.current?"1.0":"0",transform:f.current?"scale(1)":"scale(0)"}})),r.a.createElement("label",{className:"sr-only",htmlFor:o,style:{textTransform:"uppercase"}},i),r.a.createElement("input",{ref:f,id:o,className:"input-slider",type:"range",min:c,max:s,onChange:l,onMouseUp:d,value:m}))}),ce=(n(126),r.a.forwardRef((function(e,t){e.closeContextMenu;return r.a.createElement("div",{ref:t,id:"context-menu"},r.a.createElement("ul",null,r.a.createElement("strong",null,"Add new")))}))),le=(n(127),document.getElementById("modalRoot")),ue=function(e){var t=e.children,n=Object(a.useState)(document.createElement("div")),r=Object(R.a)(n,2),o=r[0];r[1];return Object(a.useEffect)((function(){return le.appendChild(o),function(){le.removeChild(o)}}),[]),i.a.createPortal(t,o)},de={resetUserErrors:function(){return function(e){e({type:T.RESET_USER_ERRORS})}},updateUser:function(e,t){return function(n){X.update(e,t).then((function(e){var t;X.setAuthToken(e.data.token),n((t=e.data.user,{type:T.UPDATE_USER_SUCCESS,user:t}))})).catch(console.log)}},updateGraphSettings:function(e,t){return function(n){Y.updateGraphSettings(e,t).then((function(){n(function(e){return{type:P,values:e}}(t))})).catch(console.log)}}},me=Object(s.b)((function(e){return{user:e.auth.user,errors:e.auth.errors,graph:e.graph.data}}),de)((function(e){var t=e.errors,n=e.graph,a=e.page,o=e.resetUserErrors,i=e.user,s=e.updateGraphSettings,c=e.updateUser;return"Profile"===a?r.a.createElement(_e,{errors:t,resetUserErrors:o,user:i,updateUser:c}):"Security"===a?r.a.createElement(ze,{errors:t,resetUserErrors:o,user:i,updateUser:c}):r.a.createElement(He,{graph:n,updateGraphSettings:s})})),fe=function(e){var t=e.currentPage,n=e.setCurrentPage;return r.a.createElement("nav",{className:"modal-nav","aria-label":"Settings navigation"},r.a.createElement("button",{className:"Profile"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Edit profile",onClick:function(){return n("Profile")}},r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("button",{className:"Security"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Security",onClick:function(){return n("Security")}},r.a.createElement("i",{className:"fas fa-lock"})),r.a.createElement("button",{className:"Settings"===t?"btn modal-nav-btn modal-nav-selected":"btn modal-nav-btn",title:"Settings",onClick:function(){return n("Settings")}},r.a.createElement("i",{className:"fas fa-cog"})))},pe=function(e){var t=e.toggleModal,n=Object(a.useState)("Profile"),o=Object(R.a)(n,2),i=o[0],s=o[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"overlay",onClick:t}),r.a.createElement("div",{className:"modal-container"},r.a.createElement(fe,{currentPage:i,setCurrentPage:s}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(me,{page:i})),r.a.createElement("button",{className:"btn modal-close fadein-btn",onClick:t},"\xd7"))))},ge=(n(128),function(e){var t=e.isLoggedIn,n=e.logout,a=e.toggleModal;return r.a.createElement("nav",{className:"navbar"},r.a.createElement(c.b,{to:"/",role:"banner",className:"navbar-brand"},r.a.createElement("img",{src:"/logo-small.png",alt:"Logo"})),t&&r.a.createElement("section",{className:"user-menu"},r.a.createElement("button",{className:"btn navbar-btn fadein-btn",title:"Edit profile",onClick:a},r.a.createElement("i",{className:"fas fa-user-circle"})),r.a.createElement("button",{className:"btn navbar-btn fadein-btn",title:"Logout",onClick:n},r.a.createElement("i",{className:"fas fa-sign-out-alt"}))))}),he=n(78),be=n(79),Ee=n(90),ve=n(89),Ne=n(88),ke=n(44),Oe=(n(140),["Select","Draw","Erase","Area select"]),ye={Select:r.a.createElement("i",{className:"fas fa-mouse-pointer"}),Draw:r.a.createElement("i",{className:"fas fa-pencil-alt"}),Erase:r.a.createElement("i",{className:"fas fa-eraser"}),"Area select":r.a.createElement("i",{className:"fas fa-vector-square"})},Se=r.a.memo((function(e){var t=e.selectTool,n=Object(a.useState)("Select"),o=Object(R.a)(n,2),i=o[0],s=o[1];return r.a.createElement("section",{className:"toolbar"},Oe.map((function(e){return r.a.createElement("button",{id:e+"-btn",key:e,name:e,className:i===e?"btn toolbar-btn toolbar-btn-selected":"btn toolbar-btn",onClick:function(){s(e),t(e)},title:e+" (".concat(e.charAt(0),")")},ye[e])})))})),Ce=function(e){var t=e.onNotesBlur,n=e.onChange,o=e.notes,i=Object(a.useState)(!1),s=Object(R.a)(i,2),c=s[0],l=s[1],u=Object(a.useRef)(null);return r.a.createElement("section",{className:"details-notes"},r.a.createElement("h2",null,"Notes",!c&&r.a.createElement("button",{onClick:function(){l(!0),u.current.disabled=!1,u.current.focus()},className:"edit-icon-btn"},r.a.createElement("i",{className:"far fa-edit"}))),r.a.createElement("textarea",{ref:u,id:"notes",onBlur:function(){l(!1),u.current.disabled=!0,t()},onChange:n,value:o,spellCheck:!1,disabled:!0}))},je=r.a.memo((function(e){var t=e.graphId,n=e.node,o=e.nodeIndex,i=e.updateNode,s=e.saveNode,c=Object(a.useState)(n.name),l=Object(R.a)(c,2),u=l[0],d=l[1],f=Object(a.useState)(!n.name),p=Object(R.a)(f,2),g=p[0],h=p[1],b=Object(a.useState)(!1),E=Object(R.a)(b,2),v=E[0],N=E[1],k=Object(a.useState)(n.isGroup),O=Object(R.a)(k,2),y=O[0],S=O[1],C=Object(a.useState)(n.val.toString()),j=Object(R.a)(C,2),w=j[0],L=j[1],x=Object(a.useState)(n.color),A=Object(R.a)(x,2),D=A[0],P=A[1],F=Object(a.useState)(n.notes),G=Object(R.a)(F,2),T=G[0],I=G[1],U=Object(a.useRef)(Object(m.a)({},n)),B=Object(a.useCallback)((function(e){e.target.className.includes("slider")||N(!1)}),[]),M=function(){var e=o[n.id];return Object(m.a)({},e)},_=function(e){U.current=Object(m.a)({},e),W(U.current),d(e.name),S(e.isGroup),h(!e.name),N(!1),L(e.val.toString()),P(e.color),I(e.notes)},z=function(){h(!1),s(t,M())},H=function(e){var n=e.currentTarget.id,a=e.currentTarget.value,r=M();["name","notes"].includes(n)?"name"===n?(d(a),r.name=a):(I(a),r.notes=a):["size"].includes(n)&&("size"===n&&(L(a),r.val=parseInt(a)),s(t,r)),i(r)},W=function(e){delete e.x,delete e.y,delete e.fx,delete e.fy};return Object(a.useEffect)((function(){n.id!==U.current.id&&_(n)}),[n,_]),Object(a.useEffect)((function(){v?document.addEventListener("click",B):document.removeEventListener("click",B)}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"details-node-icon-header"},r.a.createElement("i",{className:"fas fa-circle details-node-icon",style:{color:D}})),r.a.createElement("h1",{className:"details-node-header"},g?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"sr-only",htmlFor:"name"},"Name"),r.a.createElement("input",{className:"name-input",id:"name",type:"text",onKeyDown:function(e){if(13===e.keyCode)switch(e.currentTarget.id){case"name":z()}},onBlur:z,value:u,onChange:H,autoFocus:!0,autoComplete:"off"})):r.a.createElement(r.a.Fragment,null,u||"...",r.a.createElement("button",{onClick:function(){return h(!0)},className:"edit-icon-btn"},r.a.createElement("i",{className:"far fa-edit"})))),n.groups.length>0&&r.a.createElement("p",{className:"details-groups"},"Member of:\u2002",n.groups.map((function(e,t){var a=t===n.groups.length-1?o[e].name:o[e].name+", ";return r.a.createElement("span",{key:e},a)}))),r.a.createElement("div",{className:"details-button-row"},r.a.createElement("div",{className:"details-button-row-btn",title:"Change color"},r.a.createElement(ae,{value:D,onColorChange:function(e){P(e);var n=M();n.color=e,s(t,n),i(n)}})),r.a.createElement("button",{className:"details-button-row-btn",title:"Change size",onClick:function(){return N(!v)}},r.a.createElement("i",{className:"fas fa-expand-alt details-button-row-btn-icon",style:{color:D}})),v&&r.a.createElement("div",{className:"size-slider-wrapper"},r.a.createElement("div",{className:"size-slider-label"},r.a.createElement("span",null,"Size"),r.a.createElement("span",null,w)),r.a.createElement(se,{color:D,id:"size",label:"Node size",min:1,max:10,onChange:H,onMouseUp:function(){return N(!1)},value:w})),r.a.createElement("button",{className:"details-button-row-btn",onClick:function(){var e=M();S(!y),e.isGroup=!y,s(t,e),i(e)}},y?r.a.createElement("i",{className:"fas fa-house-user details-button-row-btn-icon",style:{color:D}}):r.a.createElement("i",{className:"fas fa-user",style:{color:D}}))),r.a.createElement(Ce,{onNotesBlur:function(){s(t,M())},onChange:H,notes:T}),function(){var e=U.current;return u!==e.name||y!==e.isGroup||w!==e.val.toString()||D!==e.color||T!==e.notes}()&&r.a.createElement("button",{id:"details-undo-btn",className:"details-btn",onClick:function(){_(U.current),i(U.current),s(t,U.current)},style:{color:D,borderColor:D},title:"Undo changes"},r.a.createElement("i",{className:"fas fa-undo"})))}),(function(e,t){var n=e.node,a=t.node;return n.id===a.id&&n.groups.length===a.groups.length&&n.name===a.name&&n.notes===a.notes})),we=r.a.memo((function(e){var t=e.link,n=e.linkIndex,o=e.graphId,i=e.saveLink,s=e.updateLink,c=Object(a.useState)(t.color),l=Object(R.a)(c,2),u=l[0],d=l[1],f=Object(a.useState)(t.notes||""),p=Object(R.a)(f,2),g=p[0],h=p[1],b=Object(a.useState)(t.width.toString()),E=Object(R.a)(b,2),v=E[0],N=E[1],k=Object(a.useState)(!1),O=Object(R.a)(k,2),y=O[0],S=O[1],C=Object(a.useRef)(Object(m.a)({},t)),j=Object(a.useCallback)((function(e){e.target.className.includes("slider")||S(!1)}),[]),w=function(){var e=n[t.id];return Object(m.a)({},e)},L=function(e){C.current=Object(m.a)({},e),d(e.color),h(e.notes),N(e.width.toString())},x=function(e){var t=e.currentTarget.id,n=e.currentTarget.value,a=w();["width"].includes(t)?("width"===t&&(N(n),a.width=parseInt(n)),i(o,a)):"notes"===t&&(h(n),a.notes=n),s(a)},A=function(e){var t=e.color;return r.a.createElement("div",{className:"details-link-header-node"},r.a.createElement("i",{className:e.isGroup?"fas fa-house-user details-link-header-node-icon":"fas fa-user details-link-header-node-icon",style:{color:t}}),r.a.createElement("span",null,e.name))};return Object(a.useEffect)((function(){t.id!==C.current.id&&L(t)}),[t,L]),Object(a.useEffect)((function(){y?document.addEventListener("click",j):document.removeEventListener("click",j)}),[y]),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"details-link-header"},A(t.source),r.a.createElement("div",{className:"details-link-header-link-icon",style:{background:u,width:parseInt(v)+2}}),A(t.target)),r.a.createElement("div",{className:"details-button-row"},r.a.createElement("div",{className:"details-button-row-btn",title:"Change color"},r.a.createElement(ae,{value:u,onColorChange:function(e){var t=w();d(e),t.color=e,i(o,t),s(t)}})),r.a.createElement("button",{className:"details-button-row-btn",title:"Change width",onClick:function(){return S(!y)}},r.a.createElement("i",{className:"fas fa-expand-alt details-button-row-btn-icon",style:{color:u}})),y&&r.a.createElement("div",{className:"size-slider-wrapper"},r.a.createElement("div",{className:"size-slider-label"},r.a.createElement("span",null,"Width"),r.a.createElement("span",null,v)),r.a.createElement(se,{color:u,id:"width",label:"Link width",min:1,max:10,onChange:x,onMouseUp:function(){return S(!1)},value:v}))),r.a.createElement(Ce,{onNotesBlur:function(){i(o,t)},onChange:x,notes:g}),function(){var e=C.current;return v!==e.width.toString()||u!==e.color||g!==e.notes}()&&r.a.createElement("button",{id:"details-undo-btn",className:"details-btn",onClick:function(){L(C.current),s(C.current),i(o,C.current)},style:{color:u,borderColor:u},title:"Undo changes"},r.a.createElement("i",{className:"fas fa-undo"})))}),(function(e,t){var n=e.link,a=t.link;return n.id===a.id&&n.notes===a.notes&&n.source===a.source&&n.target===a.target})),Le=(n(141),{saveLink:function(e,t){return function(n){Y.updateLink(e,t).then((function(){return n(function(e){return{type:w,link:e}}(t))})).catch(console.log)}},saveNode:function(e,t){return function(n){Y.updateNode(e,t).then((function(){return n(function(e){return{type:L,node:e}}(t))})).catch(console.log)}},updateLink:function(e){return function(t){t(function(e){return{type:F,link:e}}(e))}},updateNode:function(e){return function(t){t(function(e){return{type:G,node:e}}(e))}}}),xe=Object(s.b)((function(e){return{graphId:e.graph.data.id,linkIndex:e.graph.idToLink,nodeIndex:e.graph.idToNode}}),Le,null,{forwardRef:!0})(r.a.forwardRef((function(e,t){var n=e.graphId,a=e.linkIndex,o=e.nodeIndex,i=e.nodeOrLink,s=e.saveLink,c=e.saveNode,l=e.updateLink,u=e.updateNode;return r.a.createElement("div",{ref:t,className:"details"},"node"===i.type?r.a.createElement(je,{graphId:n,node:i,nodeIndex:o,saveNode:c,updateNode:u}):r.a.createElement(we,{graphId:n,link:i,linkIndex:a,saveLink:s,updateLink:l}))}))),Ae=(n(142),function(e){Object(Ee.a)(n,e);var t=Object(ve.a)(n);function n(){var e;Object(he.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).graph=r.a.createRef(),e.contextMenu=r.a.createRef(),e.details=r.a.createRef(),e.selectionBox=r.a.createRef(),e.state={showContextMenu:!1,nodeClicks:0,shouldPreventZoom:!1,zoomAmount:0,currentTool:"Select",currentNodeOrLink:null,hoveredObject:null,isAddingLink:!1,hasClickBeenHandled:!0,mouseX:0,mouseY:0,ctx:null,selectedNodes:[],isSelecting:!1,selectionStartCoords:[0,0]},e.handleKeyPress=function(t){switch(t.keyCode){case 27:e.state.isAddingLink&&e.setState({isAddingLink:!1});break;case 46:var n=e.state.currentNodeOrLink;n?"node"===n.type?e.deleteNode(n):e.deleteLink(n):e.state.selectedNodes.length&&e.state.selectedNodes.forEach((function(t){return e.deleteNode(t)}))}},e.handlePencilClick=function(t){e.state.isAddingLink?e.setState({isAddingLink:!1}):e.addNode(t.clientX,t.clientY)},e.handleSelectionClick=function(t){if(e.state.isSelecting)e.selectNodesInArea(e.state.selectionStartCoords[0],e.state.selectionStartCoords[1],t.clientX,t.clientY);else{e.setState({selectionStartCoords:[t.clientX,t.clientY]});var n=e.selectionBox.current;n.style.left=t.clientX+"px",n.style.top=t.clientY+"px",n.style.width="0px",n.style.height="0px"}e.setState((function(e){return{isSelecting:!e.isSelecting}}))},e.onBackgroundClick=function(t){if(!e.state.hasClickBeenHandled){switch(e.state.currentTool){case"Select":e.state.currentNodeOrLink&&e.setState({currentNodeOrLink:null});break;case"Draw":e.handlePencilClick(t);break;case"Area select":e.handleSelectionClick(t)}e.setState({hasClickBeenHandled:!0})}},e.onClick=function(t){e.setState({hasClickBeenHandled:!1});var n=e.isContextMenuClick(t);e.state.showContextMenu&&!n&&(e.setState({hasClickBeenHandled:!0}),e.closeContextMenu())},e.onMouseMove=function(t){e.state.isSelecting&&e.drawSelectionBox(t.clientX,t.clientY);var n=e.graph.current.screen2GraphCoords(t.clientX,t.clientY),a=n.x,r=n.y;e.setState({mouseX:a,mouseY:r})},e.onHover=function(t){t!==e.state.hoveredObject&&e.setState({hoveredObject:t})},e.onRightClick=function(t){t.preventDefault();var n=t.clientY,a=t.clientX;e.setState({showContextMenu:!0},(function(){var t=e.contextMenu.current;t.offsetWidth,t.offsetHeight;t.style.left=a+"px",t.style.top=n+"px"}))},e.closeContextMenu=function(){e.setState({showContextMenu:!1})},e.createNodeFromMenu=function(){var t=e.contextMenu.current,n=parseInt(t.style.left),a=parseInt(t.style.top);e.addNode(n,a)},e.isContextMenuClick=function(t){if(!e.state.showContextMenu)return!1;var n=e.contextMenu.current.getBoundingClientRect();return!(t.clientX<n.left||t.clientX>n.right||t.clientY<n.top||t.clientY>n.bottom)},e.addNode=function(t,n){var a=e.graph.current.screen2GraphCoords(t,n),r=a.x,o=a.y,i={id:e.props.graph.data.nodeSequence,name:"",groups:[],isGroup:!1,notes:"",color:e.props.graph.data.settings.defaultNodeColor,val:e.props.graph.data.settings.defaultNodeSize,type:"node"};Object.assign(i,{fx:r,fy:o}),e.props.addNode(e.props.graph.data.id,i),e.setState({shouldPreventZoom:!0,currentNodeOrLink:i})},e.deleteNode=function(t){e.props.deleteNode(e.props.graph.data.id,t),e.setPostDeleteState(t)},e.handleNodePencilClick=function(t){e.state.isAddingLink?(e.props.graph.neighbours[t.id].has(e.state.currentNodeOrLink)||t===e.state.currentNodeOrLink||e.addLink(e.state.currentNodeOrLink.id,t.id),e.setState({isAddingLink:!1})):e.setState({currentNodeOrLink:t,isAddingLink:!0,mouseX:t.x,mouseY:t.y})},e.onNodeClick=function(t){console.log(e.props.graph.data),e.state.hasClickBeenHandled||("Select"===e.state.currentTool?(e.setState({currentNodeOrLink:t}),e.trackNodeDblClick(t)):"Erase"===e.state.currentTool?(e.deleteNode(t),e.setState({isAddingLink:!1})):"Draw"===e.state.currentTool&&e.handleNodePencilClick(t)),e.setState({selectedNodes:[],hasClickBeenHandled:!0})},e.onNodeDrag=function(t){e.state.selectedNodes.length,e.setState({currentNodeOrLink:t})},e.onNodeDragEnd=function(t){e.graph.current.d3ReheatSimulation(),t.fx=t.x,t.fy=t.y},e.selectNodesInArea=function(t,n,a,r){var o,i=e.graph.current.screen2GraphCoords(t,n),s=i.x,c=i.y,l=e.graph.current.screen2GraphCoords(a,r),u=l.x,d=l.y,m=Math.min(s,u),f=Math.max(s,u),p=Math.min(c,d),g=Math.max(c,d),h=[],b=Object(U.a)(e.props.graph.data.nodes);try{for(b.s();!(o=b.n()).done;){var E=o.value;m<=E.x&&E.x<=f&&p<=E.y&&E.y<=g&&h.push(E)}}catch(v){b.e(v)}finally{b.f()}e.setState({selectedNodes:h}),e.setState({currentNodeOrLink:1===h.length?h[0]:null})},e.trackNodeDblClick=function(t){e.setState((function(n){return n.nodeClicks>=1&&e.unstickNode(t),setTimeout((function(){e.setState({nodeClicks:0})}),200),Object(m.a)(Object(m.a)({},n),{},{nodeClicks:n.nodeClicks+1})}))},e.unstickNode=function(t){delete t.fx,delete t.fy,e.graph.current.d3ReheatSimulation()},e.addLink=function(t,n){var a={id:e.props.graph.data.linkSequence,source:e.props.graph.idToNode[t],target:e.props.graph.idToNode[n],color:e.props.graph.data.settings.defaultLinkColor,width:e.props.graph.data.settings.defaultLinkWidth,notes:"",type:"link"};e.props.addLink(e.props.graph.data.id,a),e.setState({currentNodeOrLink:a})},e.deleteLink=function(t){e.props.deleteLink(e.props.graph.data.id,t),e.setPostDeleteState(t)},e.onLinkClick=function(t){e.state.hasClickBeenHandled||("Select"===e.state.currentTool?e.setState({currentNodeOrLink:t}):"Erase"===e.state.currentTool&&e.deleteLink(t)),e.setState({hasClickBeenHandled:!0})},e.drawCircle=function(e,t,n,a,r){e.beginPath(),e.arc(t,n,a,0,2*Math.PI,!1),e.fillStyle=r,e.fill()},e.drawLine=function(e,t,n,a,r,o,i){e.beginPath(),e.strokeStyle=t,e.lineWidth=n,e.moveTo(a,r),e.lineTo(o,i),e.stroke(),e.closePath()},e.drawLink=function(t,n){e.state.ctx||e.setState({ctx:n});var a=t.source,r=t.target;[e.state.hoveredObject,e.state.currentNodeOrLink].includes(t)&&e.drawLine(n,b,t.width+3,a.x,a.y,r.x,r.y),e.drawLine(n,t.color,t.width,a.x,a.y,r.x,r.y)},e.drawNode=function(t,n,a){e.state.ctx||e.setState({ctx:n});var r=t.label||t.name||"";n.font="".concat(12,"px Sans-Serif");n.measureText(r).width;n.textAlign="center",n.textBaseline="top",n.fillStyle=t.color,n.fillText(r,t.x,t.y+t.val+5);var o=e.state.hoveredObject;[o,e.state.currentNodeOrLink].concat(Object(M.a)(e.state.selectedNodes)).includes(t)?e.drawCircle(n,t.x,t.y,t.val+3,b):o&&("isGroup"in o&&e.props.graph.neighbours[o.id].has(t)||"source"in o&&[o.source,o.target].includes(t))&&e.drawCircle(n,t.x,t.y,t.val+3,E),t===e.state.currentNodeOrLink&&e.state.isAddingLink&&e.drawTempLink(n,t.x,t.y),t.icon||e.drawCircle(n,t.x,t.y,t.val,t.color)},e.drawSelectionBox=function(t,n){var a=e.selectionBox.current,r=Object(R.a)(e.state.selectionStartCoords,2),o=r[0],i=r[1],s=Math.min(o,t),c=Math.min(i,n),l=Math.max(o,t),u=Math.max(i,n);a.style.left=s+"px",a.style.top=c+"px",a.style.width=l-s+"px",a.style.height=u-c+"px"},e.drawTempLink=function(t,n,a){e.drawLine(t,"black",1,n,a,e.state.mouseX,e.state.mouseY)},e.selectTool=function(t){e.setState({currentTool:t})},e.setPostDeleteState=function(t){e.setState((function(e){var n=e.currentNodeOrLink;return{currentNodeOrLink:n===t?null:n,hoveredObject:null,shouldPreventZoom:!0}}))},e}return Object(be.a)(n,[{key:"componentDidMount",value:function(){var e=this.graph.current;e.d3Force("center",(function(){return null})),e.d3Force("collide",Object(Ne.a)()),this.setState({zoomAmount:e.zoom()}),document.onkeyup=this.handleKeyPress}},{key:"render",value:function(){var e=this,t={ref:this.contextMenu,closeContextMenu:this.closeContextMenu},n={ref:this.details,nodeOrLink:Object(m.a)({},this.state.currentNodeOrLink)},a={graphData:this.props.graph.data,nodeAutoColorBy:"group",onBackgroundClick:this.onBackgroundClick,onNodeDrag:this.onNodeDrag,onNodeDragEnd:this.onNodeDragEnd,onNodeClick:this.onNodeClick,onNodeHover:this.onHover,nodeCanvasObject:this.drawNode,nodeCanvasObjectMode:function(){return"replace"},onLinkClick:this.onLinkClick,onLinkHover:this.onHover,linkCanvasObject:this.drawLink,d3VelocityDecay:.1,d3AlphaDecay:.1,onZoom:function(){e.state.shouldPreventZoom&&e.setState({shouldPreventZoom:!1},(function(){var t;return null===(t=e.graph.current)||void 0===t?void 0:t.zoom(e.state.zoomAmount)}))},onZoomEnd:function(t){var n=t.k;e.setState({zoomAmount:n})}};return r.a.createElement("main",{id:"dashboard",onClick:this.onClick},this.props.auth.user&&0===this.props.auth.user.id&&r.a.createElement("div",{className:"demo-message"},"DEMO (some features may not work)"),r.a.createElement("div",{ref:this.selectionBox,className:"selection-box",style:{display:this.state.isSelecting?"block":"none"}}),this.state.showContextMenu&&r.a.createElement(ce,t),this.state.currentNodeOrLink&&r.a.createElement(xe,n),r.a.createElement(Se,{selectTool:this.selectTool}),r.a.createElement("section",{className:"graph",onContextMenu:this.onRightClick,onMouseMove:this.state.isAddingLink||this.state.isSelecting?this.onMouseMove:void 0},r.a.createElement(ke.a,Object.assign({ref:this.graph},a))))}}]),n}(r.a.Component)),De={addLink:function(e,t){return function(n){n(function(e){return{type:N,link:e}}(t)),Y.addLink(e,t).catch(console.log)}},addNode:function(e,t){return function(n){n(function(e){return{type:k,node:e}}(t)),Y.addNode(e,t).catch(console.log)}},deleteLink:function(e,t){return function(n){n(function(e){return{type:O,link:e}}(t)),Y.deleteLink(e,t).catch(console.log)}},deleteNode:function(e,t){return function(n){n(function(e){return{type:y,node:e}}(t)),Y.deleteNode(e,t).catch(console.log)}}},Pe=Object(s.b)((function(e){return{auth:e.auth,graph:e.graph}}),De)(Ae),Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(a.useState)(e),n=Object(R.a)(t,2),r=n[0],o=n[1];return{value:r,setValue:o,clear:function(){return o("")},bindProps:{value:r,onChange:function(e){o(e.target.value)}}}},Ge=function(e){var t=e.width,n=e.height,o=Object(a.useRef)(),i=Object(a.useState)({nodes:[],links:[]}),s=Object(R.a)(i,2),c=s[0],l=s[1],u=function(e,t){var n=Object(M.a)(e),a=Object(M.a)(t),r=n.length?n[n.length-1].id+1:0,o=d(),i=o.x,s=o.y;if(Math.random()>.3?n.push({id:r,fx:i,fy:s}):n.push({id:r,x:i,y:s}),n.length>10){var c=n[0];n.shift(),a=a.filter((function(e){return e.source!==c&&e.target!==c}))}for(var l=0;l<4;l++){var u=n[Math.round(Math.random()*n.length-1)];u&&u.id!==r&&a.push({source:r,target:u.id})}return{nodes:n,links:a}},d=function(){return o.current.screen2GraphCoords(Math.round(Math.random()*t),Math.round(Math.random()*n))};return Object(a.useEffect)((function(){!function(){for(var e={nodes:[],links:[]},t=0;t<10;t++)Object.assign(e,u(e.nodes,e.links));l(e)}();var e=setInterval((function(){l((function(e){var t=e.nodes,n=e.links;return u(t,n)}))}),1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{id:"home-bg"},r.a.createElement(ke.a,{ref:o,graphData:c,d3VelocityDecay:1,d3AlphaDecay:1,linkWidth:2,nodeRelSize:5}))},Te={signup:function(e){return function(t){X.signup(e).then((function(){window.location.href="/login"})).catch(console.log)}}},Ie=Object(s.b)((function(e){return{authErrors:e.auth.errors}}),Te)((function(e){var t=e.authErrors,n=e.signup,o=Fe(""),i=o.value,s=o.bindProps,l=Fe(""),u=l.value,d=l.bindProps,f=Fe(""),p=f.value,g=f.bindProps,h=Fe(""),b=h.value,E=h.bindProps,v=Object(a.useState)({}),N=Object(R.a)(v,2),k=N[0],O=N[1],y=Object(a.useState)(!1),S=Object(R.a)(y,2),C=S[0],j=S[1];return Object(a.useEffect)((function(){C&&O((function(e){var n=Object(m.a)(Object(m.a)({},e),t);return i?delete n.name:n.name="Please enter a name",u?delete n.email:n.email="Please enter an email",p?delete n.password:n.password="Please enter a password",p!==b?n.password2="Passwords do not match":delete n.password2,n}))}),[C,i,u,p,b,t]),r.a.createElement("main",{id:"signup",className:"auth-page main-container"},r.a.createElement(Ge,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("div",{className:"auth-form-container"},r.a.createElement("h1",null,"Sign in"),r.a.createElement("form",{onSubmit:function(e){(e.preventDefault(),j(!0),0===Object.keys(k).length)&&n({name:i,email:u,password:p})},noValidate:!0},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-email"},"Name"),r.a.createElement("input",Object.assign({className:k.name?"form-input-error":"form-input",type:"text",id:"signup-name",name:"name",placeholder:"Name",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0,required:!0},s)),r.a.createElement("div",{className:"form-input-error-text"},k.name)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-email"},"Email"),r.a.createElement("input",Object.assign({className:k.email?"form-input-error":"form-input",type:"text",id:"signup-email",name:"email",placeholder:"Email",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",required:!0},d)),r.a.createElement("div",{className:"form-input-error-text"},k.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-password"},"Password"),r.a.createElement("input",Object.assign({className:k.password?"form-input-error":"form-input",type:"password",id:"signup-password",name:"password",placeholder:"Password",autoComplete:"off",required:!0},g)),r.a.createElement("div",{className:"form-input-error-text"},k.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"signup-password2"},"Confirm password"),r.a.createElement("input",Object.assign({className:k.password2?"form-input-error":"form-input",type:"password",id:"signup-password2",name:"password2",placeholder:"Confirm password",autoComplete:"off",required:!0},E)),r.a.createElement("div",{className:"form-input-error-text"},k.password2)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"form-submit",type:"submit",disabled:!(i&&u&&p&&b)||Object.keys(k).length>0},"SIGN UP")))),r.a.createElement("div",{className:"auth-form-container"},"Already have an account? ",r.a.createElement(c.b,{to:"/login",className:"form-link"},"Login")))})),Ue=(n(143),{login:function(e,t){return function(n){X.login(e,t).then((function(e){X.setAuthToken(e.data.token),n(J(e.data.user)),window.location.href="/"})).catch(console.log)}}}),Be=Object(s.b)((function(e){return{auth:e.auth}}),Ue)((function(e){var t=e.login,n=Fe(""),o=n.value,i=n.bindProps,s=Fe(""),l=s.value,u=s.bindProps,d=Object(a.useState)({}),f=Object(R.a)(d,2),p=f[0],g=f[1],h=Object(a.useState)(!1),b=Object(R.a)(h,2),E=b[0],v=b[1];return Object(a.useEffect)((function(){E&&g((function(e){var t=Object(m.a)({},e);return o?delete t.email:t.email="Please enter an email",l?delete t.password:t.password="Please enter a password",t}))}),[E,o,l]),r.a.createElement("main",{id:"login",className:"auth-page main-container"},r.a.createElement(Ge,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("div",{className:"auth-form-container"},r.a.createElement("h1",null,"Login to continue"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v(!0),0===Object.keys(p).length&&t(o,l)},noValidate:!0},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"login-email"},"Email"),r.a.createElement("input",Object.assign({className:p.email?"form-input-error":"form-input",type:"text",id:"login-email",name:"email",placeholder:"Email",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",autoFocus:!0},i)),r.a.createElement("div",{className:"form-input-error-text"},p.email)),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{className:"sr-only",htmlFor:"login-password"},"Password"),r.a.createElement("input",Object.assign({className:p.password?"form-input-error":"form-input",type:"password",id:"login-password",name:"password",placeholder:"Password",autoComplete:"off",required:!0},u)),r.a.createElement("div",{className:"form-input-error-text"},p.password)),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"form-submit",type:"submit",disabled:!(o&&l)||Object.keys(p).length>0},"LOGIN")))),r.a.createElement("div",{className:"auth-form-container"},"Don't have an account? ",r.a.createElement(c.b,{to:"/signup",className:"form-link"},"Sign up")))})),Re=(n(144),{loadTestGraph:ee,loginSuccess:J}),Me=Object(s.b)(null,Re)((function(e){var t=e.loadTestGraph,n=e.loginSuccess,o=Object(a.useState)(!1),i=Object(R.a)(o,2),s=i[0],l=i[1];return r.a.createElement("main",{id:"home",className:"main-container"},r.a.createElement(Ge,{width:window.innerWidth,height:window.innerHeight}),r.a.createElement("h1",{className:"main-title"},r.a.createElement("span",{className:"thin"},"Welcome to"),"\u2002",!s&&"MAPSOC",r.a.createElement("img",{className:"logo",src:"/logo-big-home.png",alt:"Logo",style:s?{marginLeft:"2px"}:{width:0},onLoad:function(){return l(!0)}})),r.a.createElement("div",{className:"auth-links"},r.a.createElement(c.b,{to:"/login",style:{backgroundColor:"rgba(137, 188, 219, 0.3)"}},"Login"),r.a.createElement(c.b,{to:"/signup"},"Sign up")),r.a.createElement("div",{className:"demo-wrapper"},"Or check out the ",r.a.createElement("button",{className:"demo-btn",onClick:function(){n({id:0,name:"Test User",email:"test@mapsoc.com"}),t()}},"DEMO")))})),_e=(n(145),function(e){var t=e.errors,n=e.resetUserErrors,o=e.updateUser,i=e.user,s=Fe(i.name),c=s.value,l=s.bindProps,u=Fe(i.email),d=u.value,m=u.bindProps,f=Object(a.useState)(!1),p=Object(R.a)(f,2),g=p[0],h=p[1];return Object(a.useEffect)((function(){h(!!c&&!!d&&(c!==i.name||d!==i.email))}),[c,d]),Object(a.useEffect)((function(){return function(){return n()}}),[]),r.a.createElement("section",{className:"profile"},r.a.createElement("h1",null,"Edit Profile"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===Object.keys(t).length&&o(i.id,{name:c,email:d})},noValidate:!0},r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"name"},"Name"),r.a.createElement("input",Object.assign({type:"text",id:"name",className:"form-input"},l))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"email"},"Email"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"email",id:"email",className:"form-input"},m)),r.a.createElement("div",{className:"form-input-error-text"},t.email))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!g},"Update"))))}),ze=function(e){var t=e.errors,n=e.resetUserErrors,o=e.user,i=e.updateUser,s=Fe(""),c=s.value,l=s.bindProps,u=Fe(""),d=u.value,m=u.bindProps,f=Fe(""),p=f.value,g=f.bindProps,h=Object(a.useState)(!1),b=Object(R.a)(h,2),E=b[0],v=b[1];return Object(a.useEffect)((function(){v(!!c&&!!d&&!!p&&d===p)}),[c,d,p]),Object(a.useEffect)((function(){return function(){return n()}}),[]),r.a.createElement("section",{className:"security"},r.a.createElement("h1",null,"Security"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0===Object.keys(t).length&&i(o.id,{currPassword:c,newPassword:d})},noValidate:!0},r.a.createElement("h2",null,"Change Password"),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"currPassword"},"Current"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"password",id:"currPassword",className:"form-input"},l)),r.a.createElement("div",{className:"form-input-error-text"},t.currPassword))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"newPassword"},"New"),r.a.createElement("input",Object.assign({type:"password",id:"newPassword",className:"form-input"},m))),r.a.createElement("div",{className:"form-group form-col-wrapper"},r.a.createElement("label",{className:"form-label",htmlFor:"newPassword2"},"Re-type new"),r.a.createElement("div",null,r.a.createElement("input",Object.assign({type:"password",id:"newPassword2",className:"form-input"},g)),r.a.createElement("div",{className:"form-input-error-text"},d!==p?"Passwords do not match":""))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!E},"Update"))))},He=(n(146),function(e){var t=e.graph,n=e.updateGraphSettings,o=Object(a.useState)(t.settings.defaultNodeColor),i=Object(R.a)(o,2),s=i[0],c=i[1],l=Object(a.useState)(t.settings.defaultNodeSize.toString()),u=Object(R.a)(l,2),d=u[0],m=u[1],f=Object(a.useState)(t.settings.defaultLinkColor),p=Object(R.a)(f,2),g=p[0],h=p[1],b=Object(a.useState)(t.settings.defaultLinkWidth.toString()),E=Object(R.a)(b,2),v=E[0],N=E[1],k=Object(a.useState)([0,0]),O=Object(R.a)(k,2),y=O[0],S=O[1],C=Object(a.useRef)(null),j=Object(a.useRef)(null);return Object(a.useEffect)((function(){if(C.current){var e=C.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t.scale(2.2,2.2);var n=e.width/4.4,a=e.height/4.4;t.beginPath(),t.arc(n,a,parseInt(d),0,2*Math.PI,!1),t.fillStyle=s,t.fill()}}),[s,d,C,y]),Object(a.useEffect)((function(){if(j.current){var e=j.current;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t.scale(2.2,2.2),t.beginPath(),t.strokeStyle=g,t.lineWidth=parseInt(v),t.moveTo(10,e.height/2.2-10),t.lineTo(e.width/2.2-10,10),t.stroke(),t.closePath()}}),[g,v,j,y]),Object(a.useLayoutEffect)((function(){var e=function(){S([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),r.a.createElement("section",{className:"settings"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={defaultNodeColor:s,defaultNodeSize:parseInt(d),defaultLinkColor:g,defaultLinkWidth:parseInt(v)};n(t.id,a)},noValidate:!0},r.a.createElement("h1",null,"Settings"),r.a.createElement("section",{id:"node-settings"},r.a.createElement("h2",null,"Nodes"),r.a.createElement("div",{className:"form-col-wrapper"},r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement("canvas",{ref:C,id:"node-icon-cvs",style:{width:"100%",height:"100%"}})),r.a.createElement("div",{className:"node-settings-controls"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},"Default node color"),r.a.createElement(ae,{value:s,onColorChange:function(e){return c(e)},width:"100%",height:"30px"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},r.a.createElement("span",null,"Default node size"),r.a.createElement("span",null,d)),r.a.createElement(se,{color:s,id:"defaultNodeSize",label:"Default node size",min:1,max:10,onChange:function(e){return m(e.currentTarget.value.toString())},value:d}))))),r.a.createElement("section",{id:"link-settings"},r.a.createElement("h2",null,"Links"),r.a.createElement("div",{className:"form-col-wrapper"},r.a.createElement("div",{className:"icon-wrapper"},r.a.createElement("canvas",{ref:j,id:"link-icon-cvs",style:{width:"100%",height:"100%"}})),r.a.createElement("div",{className:"link-settings-controls"},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},"Default link color"),r.a.createElement(ae,{value:g,onColorChange:function(e){return h(e)},width:"100%",height:"30px"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"settings-label"},r.a.createElement("span",null,"Default link width"),r.a.createElement("span",null,v)),r.a.createElement(se,{color:g,id:"defaultLinkWidth",label:"Default link width",min:1,max:10,onChange:function(e){return N(e.currentTarget.value.toString())},value:v})))),r.a.createElement("div",{className:"form-group form-group-submit"},r.a.createElement("button",{type:"submit",className:"form-submit",disabled:!function(){var e=t.settings;return s!==e.defaultNodeColor||parseInt(d)!==e.defaultNodeSize||g!==e.defaultLinkColor||parseInt(v)!==e.defaultLinkWidth}()},"Update")))))}),We=(n(147),{loadTestGraph:ee,logout:function(){return function(e){e({type:T.LOGOUT}),X.logout(),window.location.href="/"}}}),qe=Object(s.b)((function(e){return{auth:e.auth}}),We)((function(e){var t=e.auth,n=e.children,o=(e.loadTestGraph,e.logout),i=Object(a.useState)(!1),s=Object(R.a)(i,2),c=s[0],u=s[1],d=Object(l.g)(),m=function(){u(!c)};return r.a.createElement("div",{id:"app"},"/"!==d.pathname&&r.a.createElement(ge,{isLoggedIn:t.isLoggedIn,logout:o,toggleModal:m}),c&&r.a.createElement(ue,null,r.a.createElement(pe,{toggleModal:m})),r.a.createElement(l.d,null,r.a.Children.map(n,(function(e){return r.a.cloneElement(e,{isLoggedIn:t.isLoggedIn})}))))}));n(148);window.console||(window.console={});for(var Xe=0,Ye=["debug","warn","info"];Xe<Ye.length;Xe++){console[Ye[Xe]]=function(){}}Object(o.render)(r.a.createElement(s.a,{store:H},r.a.createElement(c.a,{basename:"/MapSoc-client/"},r.a.createElement(qe,null,r.a.createElement(oe,{exact:!0,path:"/",component:Me}),r.a.createElement(oe,{path:"/login",component:Be}),r.a.createElement(oe,{path:"/signup",component:Ie}),r.a.createElement(ie,{path:"/dashboard",component:Pe}),r.a.createElement(l.a,{to:"/"})))),document.getElementById("app"))},98:function(e,t,n){e.exports=n(149)}},[[98,1,2]]]);